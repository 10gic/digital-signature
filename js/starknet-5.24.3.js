/**
 * Comes from: https://cdn.jsdelivr.net/npm/starknet@5.24.3/dist/index.global.min.js
 *
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/starknet@5.24.3/dist/index.global.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var starknet=(()=>{var t,e,r,n,s,a,i,o=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,d=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,f=(t,e)=>function(){return e||(0,t[u(t)[0]])((e={exports:{}}).exports,e),e.exports},p=(t,e)=>{for(var r in e)c(t,r,{get:e[r],enumerable:!0})},g=(t,e,r,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let s of u(e))h.call(t,s)||s===r||c(t,s,{get:()=>e[s],enumerable:!(n=l(e,s))||n.enumerable});return t},y=(t,e,r)=>(r=null!=t?o(d(t)):{},g(!e&&t&&t.__esModule?r:c(r,"default",{value:t,enumerable:!0}),t));function m(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function _(t){return"string"!=typeof t&&(t=String(t)),t}function w(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function b(t){this.map={},t instanceof b?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function E(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function v(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function k(t){var e=new FileReader,r=v(e);return e.readAsArrayBuffer(t),r}function A(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(t){var r;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:e.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:e.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():e.arrayBuffer&&e.blob&&((r=t)&&DataView.prototype.isPrototypeOf(r))?(this._bodyArrayBuffer=A(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))?this._bodyArrayBuffer=A(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=E(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=E(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(e.blob)return this.blob().then(k);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t,e,r,n,s,a=E(this);if(a)return a;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=v(e),n=/charset=([A-Za-z0-9_-]+)/.exec(t.type),s=n?n[1]:"utf-8",e.readAsText(t,s),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}function S(e,r){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,a,i=(r=r||{}).body;if(e instanceof S){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new b(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"same-origin",!r.headers&&this.headers||(this.headers=new b(r.headers)),this.method=(n=r.method||this.method||"GET",a=n.toUpperCase(),s.indexOf(a)>-1?a:n),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal||function(){if("AbortController"in t)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==r.cache&&"no-cache"!==r.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function C(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(s))}})),e}function I(t,e){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new b(e.headers),this.url=e.url||"",this._initBody(t)}function T(r,n){return new Promise((function(s,a){var o=new S(r,n);if(o.signal&&o.signal.aborted)return a(new i("Aborted","AbortError"));var c=new XMLHttpRequest;function l(){c.abort()}if(c.onload=function(){var t,e,r={statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new b,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var s=r.join(":").trim();try{e.append(n,s)}catch(t){console.warn("Response "+t.message)}}})),e)};o.url.startsWith("file://")&&(c.status<200||c.status>599)?r.status=200:r.status=c.status,r.url="responseURL"in c?c.responseURL:r.headers.get("X-Request-URL");var n="response"in c?c.response:c.responseText;setTimeout((function(){s(new I(n,r))}),0)},c.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request timed out"))}),0)},c.onabort=function(){setTimeout((function(){a(new i("Aborted","AbortError"))}),0)},c.open(o.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?c.withCredentials=!0:"omit"===o.credentials&&(c.withCredentials=!1),"responseType"in c&&(e.blob?c.responseType="blob":e.arrayBuffer&&(c.responseType="arraybuffer")),n&&"object"==typeof n.headers&&!(n.headers instanceof b||t.Headers&&n.headers instanceof t.Headers)){var u=[];Object.getOwnPropertyNames(n.headers).forEach((function(t){u.push(m(t)),c.setRequestHeader(t,_(n.headers[t]))})),o.headers.forEach((function(t,e){-1===u.indexOf(e)&&c.setRequestHeader(e,t)}))}else o.headers.forEach((function(t,e){c.setRequestHeader(e,t)}));o.signal&&(o.signal.addEventListener("abort",l),c.onreadystatechange=function(){4===c.readyState&&o.signal.removeEventListener("abort",l)}),c.send(void 0===o._bodyInit?null:o._bodyInit)}))}p({},{DOMException:()=>i,Headers:()=>b,Request:()=>S,Response:()=>I,fetch:()=>T});var O,N,R=(O={"node_modules/whatwg-fetch/fetch.js"(){t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},(e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t}).arrayBuffer&&(r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1}),b.prototype.append=function(t,e){t=m(t),e=_(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},b.prototype.delete=function(t){delete this.map[m(t)]},b.prototype.get=function(t){return t=m(t),this.has(t)?this.map[t]:null},b.prototype.has=function(t){return this.map.hasOwnProperty(m(t))},b.prototype.set=function(t,e){this.map[m(t)]=_(e)},b.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},b.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),w(t)},b.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),w(t)},b.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),w(t)},e.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries),s=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"],S.prototype.clone=function(){return new S(this,{body:this._bodyInit})},x.call(S.prototype),x.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:200,statusText:""});return t.status=0,t.type="error",t},a=[301,302,303,307,308],I.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})},i=t.DOMException;try{new i}catch(t){(i=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),i.prototype.constructor=i}T.polyfill=!0,t.fetch||(t.fetch=T,t.Headers=b,t.Request=S,t.Response=I)}},function(){return O&&(N=(0,O[u(O)[0]])(O=0)),N}),B=f({"node_modules/isomorphic-fetch/fetch-npm-browserify.js"(t,e){R(),e.exports=self.fetch.bind(self)}}),D=f({"node_modules/url-join/lib/url-join.js"(t,e){var r,n;r=t,n=function(){return function(){return function(t){var e=[];if(0===t.length)return"";if("string"!=typeof t[0])throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var r=t.shift();t[0]=r+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<t.length;n++){var s=t[n];if("string"!=typeof s)throw new TypeError("Url must be a string. Received "+s);""!==s&&(n>0&&(s=s.replace(/^[\/]+/,"")),s=n<t.length-1?s.replace(/[\/]+$/,""):s.replace(/[\/]+$/,"/"),e.push(s))}var a=e.join("/"),i=(a=a.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return i.shift()+(i.length>0?"?":"")+i.join("&")}("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},void 0!==e&&e.exports?e.exports=n():"function"==typeof define&&define.amd?define(n):r.urljoin=n()}}),F={};p(F,{Account:()=>Gd,AccountInterface:()=>Xd,BlockStatus:()=>Lt,BlockTag:()=>$t,CairoCustomEnum:()=>na,CairoOption:()=>aa,CairoOptionVariant:()=>sa,CairoResult:()=>oa,CairoResultVariant:()=>ia,CallData:()=>Oa,Contract:()=>ih,ContractFactory:()=>ch,ContractInterface:()=>oh,CustomError:()=>Vu,EntryPointType:()=>Bt,GatewayError:()=>ju,HttpError:()=>Mu,LibraryError:()=>zu,Litteral:()=>Rt,Provider:()=>kd,ProviderInterface:()=>Yd,RPC:()=>Ht,RpcProvider:()=>dd,SIMULATION_FLAG:()=>Tt,Sequencer:()=>Xt,SequencerProvider:()=>vd,Signer:()=>Zd,SignerInterface:()=>Ad,TransactionExecutionStatus:()=>Ut,TransactionFinalityStatus:()=>Pt,TransactionStatus:()=>Ft,TransactionType:()=>Dt,Uint:()=>Nt,ValidateType:()=>Ot,addAddressPadding:()=>lh,buildUrl:()=>bd,cairo:()=>Is,constants:()=>P,contractClassResponseToLegacyCompiledContract:()=>Ru,defaultProvider:()=>Wd,ec:()=>Ra,encode:()=>U,events:()=>Jd,extractContractHashes:()=>Nu,fixProto:()=>Hu,fixStack:()=>$u,getCalldata:()=>ah,getChecksumAddress:()=>dh,getDefaultNodeUrl:()=>od,hash:()=>Na,isSierra:()=>Ou,isUrl:()=>wd,json:()=>Ba,merkle:()=>Bd,num:()=>Qt,number:()=>ph,parseUDCEvent:()=>Kd,provider:()=>Fu,selector:()=>qe,shortString:()=>_s,splitArgsAndOptions:()=>eh,stark:()=>io,starknetId:()=>qu,transaction:()=>xd,typedData:()=>Rd,types:()=>It,uint256:()=>Ts,validateAndParseAddress:()=>uh,validateChecksumAddress:()=>hh});var P={};p(P,{API_VERSION:()=>bt,BN_FEE_TRANSACTION_VERSION_1:()=>gt,BN_FEE_TRANSACTION_VERSION_2:()=>yt,BN_TRANSACTION_VERSION_1:()=>ft,BN_TRANSACTION_VERSION_2:()=>pt,BaseUrl:()=>Et,HEX_STR_TRANSACTION_VERSION_1:()=>dt,HEX_STR_TRANSACTION_VERSION_2:()=>ht,IS_BROWSER:()=>Y,MASK_250:()=>_t,MASK_251:()=>wt,NetworkName:()=>vt,RPC_GOERLI_NODES:()=>St,RPC_MAINNET_NODES:()=>Ct,StarknetChainId:()=>kt,TEXT_TO_FELT_MAX_LEN:()=>ut,TransactionHashPrefix:()=>At,UDC:()=>xt,ZERO:()=>mt});var U={};function L(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function $(...t){const e=(t,e)=>r=>t(e(r));return{encode:Array.from(t).reverse().reduce(((t,r)=>t?e(t,r.encode):r.encode),void 0),decode:t.reduce(((t,r)=>t?e(t,r.decode):r.decode),void 0)}}function H(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(L(e),e<0||e>=t.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${t.length})`);return t[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const r=t.indexOf(e);if(-1===r)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return r}))}}}function V(t=""){if("string"!=typeof t)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let t of e)if("string"!=typeof t)throw new Error(`join.encode: non-string input=${t}`);return e.join(t)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(t)}}}function z(t,e="="){if(L(t),"string"!=typeof e)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let t of r)if("string"!=typeof t)throw new Error(`padding.encode: non-string input=${t}`);for(;r.length*t%8;)r.push(e);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let t of r)if("string"!=typeof t)throw new Error(`padding.decode: non-string input=${t}`);let n=r.length;if(n*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if(!((n-1)*t%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function j(t){if("function"!=typeof t)throw new Error("normalize fn should be function");return{encode:t=>t,decode:e=>t(e)}}p(U,{IS_BROWSER:()=>Y,addHexPrefix:()=>st,arrayBufferToString:()=>X,atobUniversal:()=>tt,btoaUniversal:()=>et,buf2hex:()=>rt,calcByteLength:()=>it,padLeft:()=>at,pascalToSnake:()=>lt,removeHexPrefix:()=>nt,sanitizeBytes:()=>ot,sanitizeHex:()=>ct,stringToArrayBuffer:()=>Q,utf8ToArray:()=>J});var M=(t,e)=>e?M(e,t%e):t,q=(t,e)=>t+(e-M(t,e));function Z(t,e,r,n){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(q(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${q(e,r)}`);let s=0,a=0;const i=2**r-1,o=[];for(const n of t){if(L(n),n>=2**e)throw new Error(`convertRadix2: invalid data word=${n} from=${e}`);if(s=s<<e|n,a+e>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${e}`);for(a+=e;a>=r;a-=r)o.push((s>>a-r&i)>>>0);s&=2**a-1}if(s=s<<r-a&i,!n&&a>=e)throw new Error("Excess padding");if(!n&&s)throw new Error(`Non-zero padding: ${s}`);return n&&a>0&&o.push(s>>>0),o}function K(t,e=!1){if(L(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(q(8,t)>32||q(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Z(Array.from(r),8,t,!e)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Z(r,t,8,e))}}}K(4),H("0123456789ABCDEF"),V(""),K(5),H("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),z(5),V(""),K(5),H("0123456789ABCDEFGHIJKLMNOPQRSTUV"),z(5),V(""),K(5),H("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),V(""),j((t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));var G=$(K(6),H("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),z(6),V("")),Y=(K(6),H("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),z(6),V(""),K(6),H("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),V(""),H("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),V(""),K(4),H("0123456789abcdef"),V(""),j((t=>{if("string"!=typeof t||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})),"undefined"!=typeof window),W="0";function X(t){return new Uint8Array(t).reduce(((t,e)=>t+String.fromCharCode(e)),"")}function J(t){return(new TextEncoder).encode(t)}function Q(t){return J(t)}function tt(t){return G.decode(t)}function et(t){return G.encode(new Uint8Array(t))}function rt(t){return t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"")}function nt(t){return t.replace(/^0x/i,"")}function st(t){return`0x${nt(t)}`}function at(t,e,r=W){return function(t,e,r,n=W){const s=e-t.length;let a=t;if(s>0){const e=n.repeat(s);a=r?e+t:t+e}return a}(t,e,!0,r)}function it(t,e=8){const{length:r}=t,n=r%e;return n?(r-n)/e*e+e:r}function ot(t,e=8,r=W){return at(t,it(t,e),r)}function ct(t){return(t=ot(t=nt(t),2))&&(t=st(t)),t}var lt=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t,ut=31,dt="0x1",ht="0x2",ft=1n,pt=2n,gt=2n**128n+ft,yt=2n**128n+pt,mt=0n,_t=2n**250n-1n,wt=2n**251n,bt=mt,Et=(t=>(t.SN_MAIN="https://alpha-mainnet.starknet.io",t.SN_GOERLI="https://alpha4.starknet.io",t))(Et||{}),vt=(t=>(t.SN_MAIN="SN_MAIN",t.SN_GOERLI="SN_GOERLI",t))(vt||{}),kt=(t=>(t.SN_MAIN="0x534e5f4d41494e",t.SN_GOERLI="0x534e5f474f45524c49",t))(kt||{}),At=(t=>(t.DECLARE="0x6465636c617265",t.DEPLOY="0x6465706c6f79",t.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",t.INVOKE="0x696e766f6b65",t.L1_HANDLER="0x6c315f68616e646c6572",t))(At||{}),xt={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},St=["https://starknet-testnet.public.blastapi.io/rpc/v0.5","https://limited-rpc.nethermind.io/goerli-juno/v0_5"],Ct=["https://starknet-mainnet.public.blastapi.io/rpc/v0.5","https://limited-rpc.nethermind.io/mainnet-juno/v0_5"],It={};p(It,{BlockStatus:()=>Lt,BlockTag:()=>$t,EntryPointType:()=>Bt,Litteral:()=>Rt,RPC:()=>Ht,SIMULATION_FLAG:()=>Tt,Sequencer:()=>Xt,TransactionExecutionStatus:()=>Ut,TransactionFinalityStatus:()=>Pt,TransactionStatus:()=>Ft,TransactionType:()=>Dt,Uint:()=>Nt,ValidateType:()=>Ot});var Tt=(t=>(t.SKIP_VALIDATE="SKIP_VALIDATE",t.SKIP_EXECUTE="SKIP_EXECUTE",t))(Tt||{}),Ot=(t=>(t.DEPLOY="DEPLOY",t.CALL="CALL",t.INVOKE="INVOKE",t))(Ot||{}),Nt=(t=>(t.u8="core::integer::u8",t.u16="core::integer::u16",t.u32="core::integer::u32",t.u64="core::integer::u64",t.u128="core::integer::u128",t.u256="core::integer::u256",t))(Nt||{}),Rt=(t=>(t.ClassHash="core::starknet::class_hash::ClassHash",t.ContractAddress="core::starknet::contract_address::ContractAddress",t))(Rt||{}),Bt=(t=>(t.EXTERNAL="EXTERNAL",t.L1_HANDLER="L1_HANDLER",t.CONSTRUCTOR="CONSTRUCTOR",t))(Bt||{}),Dt=(t=>(t.DECLARE="DECLARE",t.DEPLOY="DEPLOY",t.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",t.INVOKE="INVOKE_FUNCTION",t))(Dt||{}),Ft=(t=>(t.NOT_RECEIVED="NOT_RECEIVED",t.RECEIVED="RECEIVED",t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t.REJECTED="REJECTED",t.REVERTED="REVERTED",t))(Ft||{}),Pt=(t=>(t.NOT_RECEIVED="NOT_RECEIVED",t.RECEIVED="RECEIVED",t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t))(Pt||{}),Ut=(t=>(t.REJECTED="REJECTED",t.REVERTED="REVERTED",t.SUCCEEDED="SUCCEEDED",t))(Ut||{}),Lt=(t=>(t.PENDING="PENDING",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.REJECTED="REJECTED",t))(Lt||{}),$t=(t=>(t.pending="pending",t.latest="latest",t))($t||{}),Ht={};p(Ht,{EBlockTag:()=>Yt,EDataAvailabilityMode:()=>Wt,ESimulationFlag:()=>qt,ETransactionExecutionStatus:()=>Gt,ETransactionFinalityStatus:()=>Kt,ETransactionStatus:()=>Zt,ETransactionType:()=>Mt,Errors:()=>zt,JRPC:()=>Vt,SPEC:()=>jt});var Vt={},zt={},jt={},Mt=(t=>(t.DECLARE="DECLARE",t.DEPLOY="DEPLOY",t.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",t.INVOKE="INVOKE",t.L1_HANDLER="L1_HANDLER",t))(Mt||{}),qt=(t=>(t.SKIP_VALIDATE="SKIP_VALIDATE",t.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",t))(qt||{}),Zt=(t=>(t.RECEIVED="RECEIVED",t.REJECTED="REJECTED",t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t))(Zt||{}),Kt=(t=>(t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t))(Kt||{}),Gt=(t=>(t.SUCCEEDED="SUCCEEDED",t.REVERTED="REVERTED",t))(Gt||{}),Yt=(t=>(t.LATEST="latest",t.PENDING="pending",t))(Yt||{}),Wt=(t=>(t.L1="L1",t.L2="L2",t))(Wt||{}),Xt={};function Jt(t,e){if(!t)throw new Error(e||"Assertion failure")}var Qt={};p(Qt,{assertInRange:()=>Pe,bigNumberishArrayToDecimalStringArray:()=>Ue,bigNumberishArrayToHexadecimalStringArray:()=>Le,cleanHex:()=>Fe,getDecimalString:()=>He,getHexString:()=>Ve,getHexStringArray:()=>ze,hexToBytes:()=>Me,hexToDecimalString:()=>De,isBigInt:()=>Oe,isHex:()=>Ie,isStringWholeNumber:()=>$e,toBigInt:()=>Te,toCairoBool:()=>je,toHex:()=>Ne,toHexString:()=>Re,toStorageKey:()=>Be});var te={};p(te,{bitGet:()=>be,bitLen:()=>we,bitMask:()=>ve,bitSet:()=>Ee,bytesToHex:()=>ie,bytesToNumberBE:()=>ue,bytesToNumberLE:()=>de,concatBytes:()=>ye,createHmacDrbg:()=>xe,ensureBytes:()=>ge,equalBytes:()=>me,hexToBytes:()=>le,hexToNumber:()=>ce,numberToBytesBE:()=>he,numberToBytesLE:()=>fe,numberToHexUnpadded:()=>oe,numberToVarBytesBE:()=>pe,utf8ToBytes:()=>_e,validateObject:()=>Ce});var ee=BigInt(0),re=BigInt(1),ne=BigInt(2),se=t=>t instanceof Uint8Array,ae=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function ie(t){if(!se(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=ae[t[r]];return e}function oe(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function ce(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function le(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){const n=2*e,s=t.slice(n,n+2),a=Number.parseInt(s,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[e]=a}return r}function ue(t){return ce(ie(t))}function de(t){if(!se(t))throw new Error("Uint8Array expected");return ce(ie(Uint8Array.from(t).reverse()))}function he(t,e){return le(t.toString(16).padStart(2*e,"0"))}function fe(t,e){return he(t,e).reverse()}function pe(t){return le(oe(t))}function ge(t,e,r){let n;if("string"==typeof e)try{n=le(e)}catch(r){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else{if(!se(e))throw new Error(`${t} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const s=n.length;if("number"==typeof r&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function ye(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!se(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}function me(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function _e(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function we(t){let e;for(e=0;t>ee;t>>=re,e+=1);return e}function be(t,e){return t>>BigInt(e)&re}var Ee=(t,e,r)=>t|(r?re:ee)<<BigInt(e),ve=t=>(ne<<BigInt(t-1))-re,ke=t=>new Uint8Array(t),Ae=t=>Uint8Array.from(t);function xe(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=ke(t),s=ke(t),a=0;const i=()=>{n.fill(1),s.fill(0),a=0},o=(...t)=>r(s,n,...t),c=(t=ke())=>{s=o(Ae([0]),t),n=o(),0!==t.length&&(s=o(Ae([1]),t),n=o())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=o();const e=n.slice();r.push(e),t+=n.length}return ye(...r)};return(t,e)=>{let r;for(i(),c(t);!(r=e(l()));)c();return i(),r}}var Se={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function Ce(t,e,r={}){const n=(e,r,n)=>{const s=Se[r];if("function"!=typeof s)throw new Error(`Invalid validator "${r}", expected function`);const a=t[e];if(!(n&&void 0===a||s(a,t)))throw new Error(`Invalid param ${String(e)}=${a} (${typeof a}), expected ${r}`)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}function Ie(t){return/^0x[0-9a-f]*$/i.test(t)}function Te(t){return BigInt(t)}function Oe(t){return"bigint"==typeof t}function Ne(t){return st(Te(t).toString(16))}var Re=Ne;function Be(t){return st(Te(t).toString(16).padStart(64,"0"))}function De(t){return BigInt(st(t)).toString(10)}var Fe=t=>t.toLowerCase().replace(/^(0x)0+/,"$1");function Pe(t,e,r,n=""){const s=""===n?"invalid length":`invalid ${n} length`,a=BigInt(t),i=BigInt(e),o=BigInt(r);Jt(a>=i&&a<=o,`Message not signable, ${s}.`)}function Ue(t){return t.map((t=>Te(t).toString(10)))}function Le(t){return t.map((t=>Ne(t)))}var $e=t=>/^\d+$/.test(t);function He(t){if(Ie(t))return De(t);if($e(t))return t;throw new Error(`${t} need to be hex-string or whole-number-string`)}function Ve(t){if(Ie(t))return t;if($e(t))return Re(t);throw new Error(`${t} need to be hex-string or whole-number-string`)}function ze(t){return t.map((t=>Ve(t)))}var je=t=>(+t).toString();function Me(t){if(!Ie(t))throw new Error(`${t} need to be a hex-string`);let e=nt(t);return e.length%2!=0&&(e=`0${e}`),le(e)}var qe={};p(qe,{getSelector:()=>ms,getSelectorFromName:()=>ys,keccakBn:()=>ps,starknetKeccak:()=>gs});var Ze={};function Ke(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ge(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Ye(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function We(t,e){Ge(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p(Ze,{CURVE:()=>Fn,Fp251:()=>ns,MAX_VALUE:()=>En,ProjectivePoint:()=>Pn,Signature:()=>Un,_poseidonMDS:()=>as,_starkCurve:()=>Sn,computeHashOnElements:()=>Qn,ethSigToPrivate:()=>jn,getAccountPath:()=>Zn,getPublicKey:()=>Tn,getSharedSecret:()=>On,getStarkKey:()=>zn,grindKey:()=>Vn,keccak:()=>es,pedersen:()=>Jn,poseidonBasic:()=>os,poseidonCreate:()=>cs,poseidonHash:()=>us,poseidonHashFunc:()=>ds,poseidonHashMany:()=>fs,poseidonHashSingle:()=>hs,poseidonSmall:()=>ls,sign:()=>Bn,utils:()=>Ln,verify:()=>Dn});var Xe=BigInt(2**32-1),Je=BigInt(32);function Qe(t,e=!1){return e?{h:Number(t&Xe),l:Number(t>>Je&Xe)}:{h:0|Number(t>>Je&Xe),l:0|Number(t&Xe)}}function tr(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:a,l:i}=Qe(t[s],e);[r[s],n[s]]=[a,i]}return[r,n]}var er="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,rr=t=>t instanceof Uint8Array,nr=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),sr=(t,e)=>t<<32-e|t>>>e;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function ar(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function ir(t){if("string"==typeof t&&(t=ar(t)),!rr(t))throw new Error("expected Uint8Array, got "+typeof t);return t}var or=class{clone(){return this._cloneInto()}};function cr(t){const e=e=>t().update(ir(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function lr(t=32){if(er&&"function"==typeof er.getRandomValues)return er.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}var[ur,dr,hr]=[[],[],[]],fr=BigInt(0),pr=BigInt(1),gr=BigInt(2),yr=BigInt(7),mr=BigInt(256),_r=BigInt(113);for(let t=0,e=pr,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],ur.push(2*(5*n+r)),dr.push((t+1)*(t+2)/2%64);let s=fr;for(let t=0;t<7;t++)e=(e<<pr^(e>>yr)*_r)%mr,e&gr&&(s^=pr<<(pr<<BigInt(t))-pr);hr.push(s)}var[wr,br]=tr(hr,!0),Er=(t,e,r)=>r>32?((t,e,r)=>e<<r-32|t>>>64-r)(t,e,r):((t,e,r)=>t<<r|e>>>32-r)(t,e,r),vr=(t,e,r)=>r>32?((t,e,r)=>t<<r-32|e>>>64-r)(t,e,r):((t,e,r)=>e<<r|t>>>32-r)(t,e,r);var kr=class extends or{constructor(t,e,r,n=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ke(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){!function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,s=(e+2)%10,a=r[s],i=r[s+1],o=Er(a,i,1)^r[n],c=vr(a,i,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=o,t[e+r+1]^=c}let e=t[2],s=t[3];for(let r=0;r<24;r++){const n=dr[r],a=Er(e,s,n),i=vr(e,s,n),o=ur[r];e=t[o],s=t[o+1],t[o]=a,t[o+1]=i}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=wr[n],t[1]^=br[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Ye(this);const{blockLen:e,state:r}=this,n=(t=ir(t)).length;for(let s=0;s<n;){const a=Math.min(e-this.pos,n-s);for(let e=0;e<a;e++)r[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,0!=(128&e)&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){Ye(this,!1),Ge(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,s=t.length;n<s;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,s-n);t.set(e.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ke(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(We(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:s,enableXOF:a}=this;return t||(t=new kr(e,r,n,a,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=n,t.enableXOF=a,t.destroyed=this.destroyed,t}},Ar=(t,e,r)=>cr((()=>new kr(e,t,r))),xr=Ar(1,136,32);var Sr=class extends or{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=nr(this.buffer)}update(t){Ye(this);const{view:e,buffer:r,blockLen:n}=this,s=(t=ir(t)).length;for(let a=0;a<s;){const i=Math.min(n-this.pos,s-a);if(i!==n)r.set(t.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=nr(t);for(;n<=s-a;a+=n)this.process(e,a)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ye(this),We(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:s}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let t=a;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const s=BigInt(32),a=BigInt(4294967295),i=Number(r>>s&a),o=Number(r&a),c=n?4:0,l=n?0:4;t.setUint32(e+c,i,n),t.setUint32(e+l,o,n)}(r,n-8,BigInt(8*this.length),s),this.process(r,0);const i=nr(t),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)i.setUint32(4*t,l[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:s,destroyed:a,pos:i}=this;return t.length=n,t.pos=i,t.finished=s,t.destroyed=a,n%e&&t.buffer.set(r),t}},Cr=(t,e,r)=>t&e^t&r^e&r,Ir=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Or=new Uint32Array(64),Nr=class extends Sr{constructor(){super(64,32,8,!1),this.A=0|Tr[0],this.B=0|Tr[1],this.C=0|Tr[2],this.D=0|Tr[3],this.E=0|Tr[4],this.F=0|Tr[5],this.G=0|Tr[6],this.H=0|Tr[7]}get(){const{A:t,B:e,C:r,D:n,E:s,F:a,G:i,H:o}=this;return[t,e,r,n,s,a,i,o]}set(t,e,r,n,s,a,i,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|a,this.G=0|i,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)Or[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Or[t-15],r=Or[t-2],n=sr(e,7)^sr(e,18)^e>>>3,s=sr(r,17)^sr(r,19)^r>>>10;Or[t]=s+Or[t-7]+n+Or[t-16]|0}let{A:r,B:n,C:s,D:a,E:i,F:o,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(sr(i,6)^sr(i,11)^sr(i,25))+((u=i)&o^~u&c)+Ir[t]+Or[t]|0,d=(sr(r,2)^sr(r,13)^sr(r,22))+Cr(r,n,s)|0;l=c,c=o,o=i,i=a+e|0,a=s,s=n,n=r,r=e+d|0}var u;r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,a=a+this.D|0,i=i+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,n,s,a,i,o,c,l)}roundClean(){Or.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Rr=cr((()=>new Nr)),Br=BigInt(0),Dr=BigInt(1),Fr=BigInt(2),Pr=BigInt(3),Ur=BigInt(4),Lr=BigInt(5),$r=BigInt(8);BigInt(9),BigInt(16);function Hr(t,e){const r=t%e;return r>=Br?r:e+r}function Vr(t,e,r){if(r<=Br||e<Br)throw new Error("Expected power/modulo > 0");if(r===Dr)return Br;let n=Dr;for(;e>Br;)e&Dr&&(n=n*t%r),t=t*t%r,e>>=Dr;return n}function zr(t,e){if(t===Br||e<=Br)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Hr(t,e),n=e,s=Br,a=Dr,i=Dr,o=Br;for(;r!==Br;){const t=n/r,e=n%r,c=s-i*t,l=a-o*t;n=r,r=e,s=i,a=o,i=c,o=l}if(n!==Dr)throw new Error("invert: does not exist");return Hr(s,e)}function jr(t){if(t%Ur===Pr){const e=(t+Dr)/Ur;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%$r===Lr){const e=(t-Lr)/$r;return function(t,r){const n=t.mul(r,Fr),s=t.pow(n,e),a=t.mul(r,s),i=t.mul(t.mul(a,Fr),s),o=t.mul(a,t.sub(i,t.ONE));if(!t.eql(t.sqr(o),r))throw new Error("Cannot find square root");return o}}return function(t){const e=(t-Dr)/Fr;let r,n,s;for(r=t-Dr,n=0;r%Fr===Br;r/=Fr,n++);for(s=Fr;s<t&&Vr(s,e,t)!==t-Dr;s++);if(1===n){const e=(t+Dr)/Ur;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const a=(r+Dr)/Fr;return function(t,i){if(t.pow(i,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let o=n,c=t.pow(t.mul(t.ONE,s),r),l=t.pow(i,a),u=t.pow(i,r);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(u);e<o&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(c,Dr<<BigInt(o-e-1));c=t.sqr(r),l=t.mul(l,r),u=t.mul(u,c),o=e}return l}}(t)}var Mr=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qr(t){return Ce(t,Mr.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function Zr(t,e,r){if(r<Br)throw new Error("Expected power > 0");if(r===Br)return t.ONE;if(r===Dr)return e;let n=t.ONE,s=e;for(;r>Br;)r&Dr&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Dr;return n}function Kr(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Gr(t,e,r=!1,n={}){if(t<=Br)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:a}=Kr(t,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=jr(t),o=Object.freeze({ORDER:t,BITS:s,BYTES:a,MASK:ve(s),ZERO:Br,ONE:Dr,create:e=>Hr(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return Br<=e&&e<t},is0:t=>t===Br,isOdd:t=>(t&Dr)===Dr,neg:e=>Hr(-e,t),eql:(t,e)=>t===e,sqr:e=>Hr(e*e,t),add:(e,r)=>Hr(e+r,t),sub:(e,r)=>Hr(e-r,t),mul:(e,r)=>Hr(e*r,t),pow:(t,e)=>Zr(o,t,e),div:(e,r)=>Hr(e*zr(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>zr(e,t),sqrt:n.sqrt||(t=>i(o,t)),invertBatch:t=>function(t,e){const r=new Array(e.length),n=e.reduce(((e,n,s)=>t.is0(n)?e:(r[s]=e,t.mul(e,n))),t.ONE),s=t.inv(n);return e.reduceRight(((e,n,s)=>t.is0(n)?e:(r[s]=t.mul(e,r[s]),t.mul(e,n))),s),r}(o,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?fe(t,a):he(t,a),fromBytes:t=>{if(t.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${t.length}`);return r?de(t):ue(t)}});return Object.freeze(o)}function Yr(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Wr(t){const e=Yr(t);return e+Math.ceil(e/2)}var Xr={};function Jr(t){const{Fp:e,mds:r,reversePartialPowIdx:n,roundConstants:s}=t,{roundsFull:a,roundsPartial:i,sboxPower:o,t:c}=t;qr(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error(`Poseidon: invalid param ${e}=${t[e]} (${typeof t[e]})`);if(!Array.isArray(r)||r.length!==c)throw new Error("Poseidon: wrong MDS matrix");const l=r.map((t=>{if(!Array.isArray(t)||t.length!==c)throw new Error(`Poseidon MDS matrix row: ${t}`);return t.map((t=>{if("bigint"!=typeof t)throw new Error(`Poseidon MDS matrix value=${t}`);return e.create(t)}))}));if(void 0!==n&&"boolean"!=typeof n)throw new Error(`Poseidon: invalid param reversePartialPowIdx=${n}`);if(a%2!=0)throw new Error(`Poseidon roundsFull is not even: ${a}`);const u=a+i;if(!Array.isArray(s)||s.length!==u)throw new Error("Poseidon: wrong round constants");const d=s.map((t=>{if(!Array.isArray(t)||t.length!==c)throw new Error(`Poseidon wrong round constants: ${t}`);return t.map((t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error(`Poseidon wrong round constant=${t}`);return e.create(t)}))}));if(!o||![3,5,7].includes(o))throw new Error(`Poseidon wrong sboxPower=${o}`);const h=BigInt(o);let f=t=>Zr(e,t,h);return 3===o?f=t=>e.mul(e.sqrN(t),t):5===o&&(f=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:u,sboxFn:f,roundConstants:d,mds:l})}function Qr(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: wrong t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: wrong rc");const r=[];let n=[];for(let s=0;s<t.length;s++)n.push(t[s]),n.length===e&&(r.push(n),n=[]);return r}function tn(t){const e=Jr(t),{Fp:r,mds:n,roundConstants:s,rounds:a,roundsPartial:i,sboxFn:o,t:c}=e,l=e.roundsFull/2,u=e.reversePartialPowIdx?c-1:0,d=(t,e,a)=>(t=t.map(((t,e)=>r.add(t,s[a][e]))),e?t=t.map((t=>o(t))):t[u]=o(t[u]),t=n.map((e=>e.reduce(((e,n,s)=>r.add(e,r.mulN(n,t[s]))),r.ZERO)))),h=function(t){if(!Array.isArray(t)||t.length!==c)throw new Error(`Poseidon: wrong values (expected array of bigints with length ${c})`);t=t.map((t=>{if("bigint"!=typeof t)throw new Error(`Poseidon: wrong value=${t} (${typeof t})`);return r.create(t)}));let e=0;for(let r=0;r<l;r++)t=d(t,!0,e++);for(let r=0;r<i;r++)t=d(t,!1,e++);for(let r=0;r<l;r++)t=d(t,!0,e++);if(e!==a)throw new Error(`Poseidon: wrong number of rounds: last round=${e}, total=${a}`);return t};return h.roundConstants=s,h}p(Xr,{poseidon:()=>tn,splitConstants:()=>Qr,validateOpts:()=>Jr});var en={};p(en,{DER:()=>cn,SWUFpSqrtRatio:()=>yn,mapToCurveSimpleSWU:()=>mn,weierstrass:()=>gn,weierstrassPoints:()=>pn});var rn=BigInt(0),nn=BigInt(1);function sn(t){return qr(t.Fp),Ce(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Kr(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}var{bytesToNumberBE:an,hexToBytes:on}=te,cn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=cn;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:an(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=cn,r="string"==typeof t?on(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:a}=cn._parseInt(r.subarray(2)),{d:i,l:o}=cn._parseInt(a);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:i}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),s=e(r(t.r)),a=n.length/2,i=s.length/2,o=r(a),c=r(i);return`30${r(i+a+4)}02${c}${s}02${o}${n}`}},ln=BigInt(0),un=BigInt(1),dn=BigInt(2),hn=BigInt(3),fn=BigInt(4);function pn(t){const e=function(t){const e=sn(t);Ce(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{const s=e.toAffine();return ye(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function a(t){const{a:n,b:s}=e,a=r.sqr(t),i=r.mul(a,t);return r.add(r.add(i,r.mul(t,n)),s)}if(!r.eql(r.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function i(t){return"bigint"==typeof t&&ln<t&&t<e.n}function o(t){if(!i(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:s,n:a}=e;if(r&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=ie(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*n,"0")}let i;try{i="bigint"==typeof t?t:ue(ge("private key",t,n))}catch(e){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return s&&(i=Hr(i,a)),o(i),i}const l=new Map;function u(t){if(!(t instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof d)throw new Error("projective point not allowed");const s=t=>r.eql(t,r.ZERO);return s(e)&&s(n)?d.ZERO:new d(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(d.fromAffine)}static fromHex(t){const e=d.fromAffine(s(ge("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return d.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw new Error("bad point: x or y not FE");const s=r.sqr(n),i=a(t);if(!r.eql(s,i))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){u(t);const{px:e,py:n,pz:s}=this,{px:a,py:i,pz:o}=t,c=r.eql(r.mul(e,o),r.mul(a,s)),l=r.eql(r.mul(n,o),r.mul(i,s));return c&&l}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,s=r.mul(n,hn),{px:a,py:i,pz:o}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,h=r.mul(a,a),f=r.mul(i,i),p=r.mul(o,o),g=r.mul(a,i);return g=r.add(g,g),u=r.mul(a,o),u=r.add(u,u),c=r.mul(t,u),l=r.mul(s,p),l=r.add(c,l),c=r.sub(f,l),l=r.add(f,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(s,u),p=r.mul(t,p),g=r.sub(h,p),g=r.mul(t,g),g=r.add(g,u),u=r.add(h,h),h=r.add(u,h),h=r.add(h,p),h=r.mul(h,g),l=r.add(l,h),p=r.mul(i,o),p=r.add(p,p),h=r.mul(p,g),c=r.sub(c,h),u=r.mul(p,f),u=r.add(u,u),u=r.add(u,u),new d(c,l,u)}add(t){u(t);const{px:n,py:s,pz:a}=this,{px:i,py:o,pz:c}=t;let l=r.ZERO,h=r.ZERO,f=r.ZERO;const p=e.a,g=r.mul(e.b,hn);let y=r.mul(n,i),m=r.mul(s,o),_=r.mul(a,c),w=r.add(n,s),b=r.add(i,o);w=r.mul(w,b),b=r.add(y,m),w=r.sub(w,b),b=r.add(n,a);let E=r.add(i,c);return b=r.mul(b,E),E=r.add(y,_),b=r.sub(b,E),E=r.add(s,a),l=r.add(o,c),E=r.mul(E,l),l=r.add(m,_),E=r.sub(E,l),f=r.mul(p,b),l=r.mul(g,_),f=r.add(l,f),l=r.sub(m,f),f=r.add(m,f),h=r.mul(l,f),m=r.add(y,y),m=r.add(m,y),_=r.mul(p,_),b=r.mul(g,b),m=r.add(m,_),_=r.sub(y,_),_=r.mul(p,_),b=r.add(b,_),y=r.mul(m,b),h=r.add(h,y),y=r.mul(E,b),l=r.mul(w,l),l=r.sub(l,y),y=r.mul(w,m),f=r.mul(E,f),f=r.add(f,y),new d(l,h,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(d.ZERO)}wNAF(t){return f.wNAFCached(this,l,t,(t=>{const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(d.fromAffine)}))}multiplyUnsafe(t){const n=d.ZERO;if(t===ln)return n;if(o(t),t===un)return this;const{endo:s}=e;if(!s)return f.unsafeLadder(this,t);let{k1neg:a,k1:i,k2neg:c,k2:l}=s.splitScalar(t),u=n,h=n,p=this;for(;i>ln||l>ln;)i&un&&(u=u.add(p)),l&un&&(h=h.add(p)),p=p.double(),i>>=un,l>>=un;return a&&(u=u.negate()),c&&(h=h.negate()),h=new d(r.mul(h.px,s.beta),h.py,h.pz),u.add(h)}multiply(t){o(t);let n,s,a=t;const{endo:i}=e;if(i){const{k1neg:t,k1:e,k2neg:o,k2:c}=i.splitScalar(a);let{p:l,f:u}=this.wNAF(e),{p:h,f:p}=this.wNAF(c);l=f.constTimeNegate(t,l),h=f.constTimeNegate(o,h),h=new d(r.mul(h.px,i.beta),h.py,h.pz),n=l.add(h),s=u.add(p)}else{const{p:t,f:e}=this.wNAF(a);n=t,s=e}return d.normalizeZ([n,s])[0]}multiplyAndAddUnsafe(t,e,r){const n=d.BASE,s=(t,e)=>e!==ln&&e!==un&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),a=s(this,e).add(s(t,r));return a.is0()?void 0:a}toAffine(t){const{px:e,py:n,pz:s}=this,a=this.is0();null==t&&(t=a?r.ONE:r.inv(s));const i=r.mul(e,t),o=r.mul(n,t),c=r.mul(s,t);if(a)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:i,y:o}}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===un)return!0;if(r)return r(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===un?this:r?r(d,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(d,this,t)}toHex(t=!0){return ie(this.toRawBytes(t))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const h=e.nBitLength,f=function(t,e){const r=(t,e)=>{const r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,s=e;for(;r>rn;)r&nn&&(n=n.add(s)),s=s.double(),r>>=nn;return n},precomputeWindow(t,e){const{windows:r,windowSize:s}=n(e),a=[];let i=t,o=i;for(let t=0;t<r;t++){o=i,a.push(o);for(let t=1;t<s;t++)o=o.add(i),a.push(o);i=o.double()}return a},wNAF(e,s,a){const{windows:i,windowSize:o}=n(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),d=2**e,h=BigInt(e);for(let t=0;t<i;t++){const e=t*o;let n=Number(a&u);a>>=h,n>o&&(n-=d,a+=nn);const i=e,f=e+Math.abs(n)-1,p=t%2!=0,g=n<0;0===n?l=l.add(r(p,s[i])):c=c.add(r(g,s[f]))}return{p:c,f:l}},wNAFCached(t,e,r,n){const s=t._WINDOW_SIZE||1;let a=e.get(t);return a||(a=this.precomputeWindow(t,s),1!==s&&e.set(t,n(a))),this.wNAF(s,a,r)}}}(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:a,isWithinCurveOrder:i}}function gn(t){const e=function(t){const e=sn(t);return Ce(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n:n}=e,s=r.BYTES+1,a=2*r.BYTES+1;function i(t){return Hr(t,n)}function o(t){return zr(t,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=pn({...e,toBytes(t,e,n){const s=e.toAffine(),a=r.toBytes(s.x),i=ye;return n?i(Uint8Array.from([e.hasEvenY()?2:3]),a):i(Uint8Array.from([4]),a,r.toBytes(s.y))},fromBytes(t){const e=t.length,n=t[0],i=t.subarray(1);if(e!==s||2!==n&&3!==n){if(e===a&&4===n){return{x:r.fromBytes(i.subarray(0,r.BYTES)),y:r.fromBytes(i.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${e} was invalid. Expected ${s} compressed bytes or ${a} uncompressed bytes`)}{const t=ue(i);if(!(ln<(o=t)&&o<r.ORDER))throw new Error("Point is not on curve");const e=u(t);let s=r.sqrt(e);return 1==(1&n)!==((s&un)===un)&&(s=r.neg(s)),{x:t,y:s}}var o}}),h=t=>ie(he(t,e.nByteLength));function f(t){return t>n>>un}const p=(t,e,r)=>ue(t.slice(e,r));class g{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const r=e.nByteLength;return t=ge("compactSignature",t,2*r),new g(p(t,0,r),p(t,r,2*r))}static fromDER(t){const{r:e,s:r}=cn.toSig(ge("DER",t));return new g(e,r)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r:n,s:s,recovery:a}=this,l=w(ge("msgHash",t));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");const u=2===a||3===a?n+e.n:n;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0==(1&a)?"02":"03",f=c.fromHex(d+h(u)),p=o(u),g=i(-l*p),y=i(s*p),m=c.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return le(this.toDERHex())}toDERHex(){return cn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return le(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=Wr(e.n);return function(t,e,r=!1){const n=t.length,s=Yr(e),a=Wr(e);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const i=Hr(r?ue(t):de(t),e-Dr)+Dr;return r?fe(i,s):he(i,s)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function m(t){const e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===s||n===a:r?n===2*s||n===2*a:t instanceof c}const _=e.bits2int||function(t){const r=ue(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},w=e.bits2int_modN||function(t){return i(_(t))},b=ve(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(ln<=t&&t<b))throw new Error(`bigint expected < 2^${e.nBitLength}`);return he(t,e.nByteLength)}function v(t,n,s=k){if(["recovered","canonical"].some((t=>t in s)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:u}=e;let{lowS:h,prehash:p,extraEntropy:y}=s;null==h&&(h=!0),t=ge("msgHash",t),p&&(t=ge("prehashed msgHash",a(t)));const m=w(t),b=l(n),v=[E(b),E(m)];if(null!=y){const t=!0===y?u(r.BYTES):y;v.push(ge("extraEntropy",t))}const A=ye(...v),x=m;return{seed:A,k2sig:function(t){const e=_(t);if(!d(e))return;const r=o(e),n=c.BASE.multiply(e).toAffine(),s=i(n.x);if(s===ln)return;const a=i(r*i(x+s*b));if(a===ln)return;let l=(n.x===s?0:2)|Number(n.y&un),u=a;return h&&f(a)&&(u=function(t){return f(t)?i(-t):t}(a),l^=1),new g(s,u,l)}}}const k={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(m(t))throw new Error("first arg must be private key");if(!m(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(r)},sign:function(t,r,n=k){const{seed:s,k2sig:a}=v(t,r,n),i=e;return xe(i.hash.outputLen,i.nByteLength,i.hmac)(s,a)},verify:function(t,r,n,s=A){const a=t;if(r=ge("msgHash",r),n=ge("publicKey",n),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=s;let d,h;try{if("string"==typeof a||a instanceof Uint8Array)try{d=g.fromDER(a)}catch(t){if(!(t instanceof cn.Err))throw t;d=g.fromCompact(a)}else{if("object"!=typeof a||"bigint"!=typeof a.r||"bigint"!=typeof a.s)throw new Error("PARSE");{const{r:t,s:e}=a;d=new g(t,e)}}h=c.fromHex(n)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&d.hasHighS())return!1;u&&(r=e.hash(r));const{r:f,s:p}=d,y=w(r),m=o(p),_=i(y*m),b=i(f*m),E=c.BASE.multiplyAndAddUnsafe(h,_,b)?.toAffine();return!!E&&i(E.x)===f},ProjectivePoint:c,Signature:g,utils:y}}function yn(t,e){const r=t.ORDER;let n=ln;for(let t=r-un;t%dn===ln;t/=dn)n+=un;const s=n,a=dn<<s-un-un,i=a*dn,o=(r-un)/i,c=(o-un)/dn,l=i-un,u=a,d=t.pow(e,o),h=t.pow(e,(o+un)/dn);let f=(e,r)=>{let n=d,a=t.pow(r,l),i=t.sqr(a);i=t.mul(i,r);let o=t.mul(e,i);o=t.pow(o,c),o=t.mul(o,a),a=t.mul(o,r),i=t.mul(o,e);let f=t.mul(i,a);o=t.pow(f,u);let p=t.eql(o,t.ONE);a=t.mul(i,h),o=t.mul(f,n),i=t.cmov(a,i,p),f=t.cmov(o,f,p);for(let e=s;e>un;e--){let r=e-dn;r=dn<<r-un;let s=t.pow(f,r);const o=t.eql(s,t.ONE);a=t.mul(i,n),n=t.mul(n,n),s=t.mul(f,n),i=t.cmov(a,i,o),f=t.cmov(s,f,o)}return{isValid:p,value:i}};if(t.ORDER%fn===hn){const r=(t.ORDER-hn)/fn,n=t.sqrt(t.neg(e));f=(e,s)=>{let a=t.sqr(s);const i=t.mul(e,s);a=t.mul(a,i);let o=t.pow(a,r);o=t.mul(o,i);const c=t.mul(o,n),l=t.mul(t.sqr(o),s),u=t.eql(l,e);return{isValid:u,value:t.cmov(c,o,u)}}}return f}function mn(t,e){if(qr(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=yn(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let s,a,i,o,c,l,u,d;s=t.sqr(n),s=t.mul(s,e.Z),a=t.sqr(s),a=t.add(a,s),i=t.add(a,t.ONE),i=t.mul(i,e.B),o=t.cmov(e.Z,t.neg(a),!t.eql(a,t.ZERO)),o=t.mul(o,e.A),a=t.sqr(i),l=t.sqr(o),c=t.mul(l,e.A),a=t.add(a,c),a=t.mul(a,i),l=t.mul(l,o),c=t.mul(l,e.B),a=t.add(a,c),u=t.mul(s,i);const{isValid:h,value:f}=r(a,l);d=t.mul(s,n),d=t.mul(d,f),u=t.cmov(u,i,h),d=t.cmov(d,f,h);const p=t.isOdd(n)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),u=t.div(u,o),{x:u,y:d}}}var _n=class extends or{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Ke(t.outputLen),Ke(t.blockLen)}(t);const r=ir(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return Ye(this),this.iHash.update(t),this}digestInto(t){Ye(this),Ge(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:s,blockLen:a,outputLen:i}=this;return t.finished=n,t.destroyed=s,t.blockLen=a,t.outputLen=i,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},wn=(t,e,r)=>new _n(t,e).update(r).digest();wn.create=(t,e)=>new _n(t,e);var bn=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),En=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function vn(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,r=ue(t);return e>0?r>>BigInt(e):r}function kn(t){return"string"==typeof t&&1&(t=Hn(t)).length&&(t="0"+t),le(t)}var An,xn=gn({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:Gr(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:bn,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(An=Rr,{hash:An,hmac:(t,...e)=>wn(An,t,function(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!rr(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}(...e)),randomBytes:lr}),bits2int:vn,bits2int_modN:t=>{const e=ue(t).toString(16);return 63===e.length&&(t=kn(e+"0")),Hr(vn(t),bn)}}),Sn=xn;function Cn(t){return ge("","string"==typeof t?kn(t):t)}function In(t){return ie(Cn(t)).padStart(64,"0")}function Tn(t,e=!1){return xn.getPublicKey(In(t),e)}function On(t,e){return xn.getSharedSecret(In(t),e)}function Nn(t){const{r:e,s:r}=t;if(e<0n||e>=En)throw new Error(`Signature.r should be [1, ${En})`);const n=zr(r,bn);if(n<0n||n>=En)throw new Error(`inv(Signature.s) should be [1, ${En})`)}function Rn(t){const e=Cn(t);if(ue(e)>=En)throw new Error(`msgHash should be [0, ${En})`);return e}function Bn(t,e,r){const n=xn.sign(Rn(t),In(e),r);return Nn(n),n}function Dn(t,e,r){if(!(t instanceof Un)){const e=Cn(t);try{t=Un.fromDER(e)}catch(r){if(!(r instanceof cn.Err))throw r;t=Un.fromCompact(e)}}return Nn(t),xn.verify(t,Rn(e),Cn(r))}var{CURVE:Fn,ProjectivePoint:Pn,Signature:Un,utils:Ln}=xn;function $n(t){return`0x${ie(t.subarray(1)).replace(/^0+/gm,"")}`}function Hn(t){return t.replace(/^0x/i,"")}function Vn(t){const e=Cn(t),r=2n**256n,n=r-Hr(r,bn);for(let t=0;;t++){const r=rs(ye(e,pe(BigInt(t))));if(r<n)return Hr(r,bn).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}function zn(t){return $n(Tn(t,!0))}function jn(t){if(130!==(t=Hn(t)).length)throw new Error("Wrong ethereum signature");return Vn(t.substring(0,64))}var Mn=2n**31n-1n,qn=t=>Number(t&Mn);function Zn(t,e,r,n){const s=qn(rs(t)),a=qn(rs(e)),i=ce(Hn(r));return`m/2645'/${s}'/${a}'/${qn(i)}'/${qn(i>>31n)}'/${n}`}var Kn=[new Pn(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new Pn(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new Pn(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new Pn(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new Pn(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function Gn(t,e){const r=[];let n=t;for(let t=0;t<248;t++)r.push(n),n=n.double();n=e;for(let t=0;t<4;t++)r.push(n),n=n.double();return r}var Yn=Gn(Kn[1],Kn[2]),Wn=Gn(Kn[3],Kn[4]);function Xn(t,e,r){let n=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(`Invalid pedersenArg: ${t}`);e=BigInt(t)}else e=ue(Cn(t));if(!(0n<=e&&e<xn.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${e}`);return e}(e);for(let e=0;e<252;e++){const s=r[e];if(s.equals(t))throw new Error("Same point");0n!==(1n&n)&&(t=t.add(s)),n>>=1n}return t}function Jn(t,e){let r=Kn[0];return r=Xn(r,t,Yn),r=Xn(r,e,Wn),$n(r.toRawBytes(!0))}var Qn=(t,e=Jn)=>[0,...t,t.length].reduce(((t,r)=>e(t,r))),ts=ve(250),es=t=>ue(xr(t))&ts,rs=t=>ue(Rr(t)),ns=Gr(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function ss(t,e,r){const n=t.fromBytes(Rr(ar(`${e}${r}`)));return t.create(n)}function as(t,e,r,n=0){const s=[],a=[];for(let i=0;i<r;i++)s.push(ss(t,`${e}x`,n*r+i)),a.push(ss(t,`${e}y`,n*r+i));if(new Set([...s,...a]).size!==2*r)throw new Error("X and Y values are not distinct");return s.map((e=>a.map((r=>t.inv(t.sub(e,r))))))}var is=[[3,1,1],[1,-1,1],[1,1,-2]].map((t=>t.map(BigInt)));function os(t,e){if(qr(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(`Wrong poseidon opts: ${t}`);const r=t.rate+t.capacity,n=t.roundsFull+t.roundsPartial,s=[];for(let e=0;e<n;e++){const n=[];for(let s=0;s<r;s++)n.push(ss(t.Fp,"Hades",r*e+s));s.push(n)}const a=tn({...t,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:s});return a.m=r,a.rate=t.rate,a.capacity=t.capacity,a}function cs(t,e=0){const r=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(`Wrong mdsAttempt=${e}`);return os(t,as(t.Fp,"HadesMDS",r,e))}var ls=os({Fp:ns,rate:2,capacity:1,roundsFull:8,roundsPartial:83},is);function us(t,e,r=ls){return r([t,e,2n])[0]}function ds(t,e,r=ls){return pe(us(ue(t),ue(e),r))}function hs(t,e=ls){return e([t,0n,1n])[0]}function fs(t,e=ls){const{m:r,rate:n}=e;if(!Array.isArray(t))throw new Error("bigint array expected in values");const s=Array.from(t);for(s.push(1n);s.length%n!=0;)s.push(0n);let a=new Array(r).fill(0n);for(let t=0;t<s.length;t+=n){for(let e=0;e<n;e++)a[e]+=s[t+e];a=e(a)}return a[0]}function ps(t){const e=nt(Ne(BigInt(t))),r=e.length%2==0?e:`0${e}`;return st(es(Me(st(r))).toString(16))}function gs(t){const e=BigInt(function(t){return st(es(J(t)).toString(16))}(t));return e&_t}function ys(t){return Ne(gs(t))}function ms(t){return Ie(t)?t:$e(t)?Re(t):ys(t)}var _s={};function ws(t){return/^[\x00-\x7F]*$/.test(t)}function bs(t){return t.length<=ut}function Es(t){return/^[0-9]*$/i.test(t)}function vs(t){return"string"==typeof t&&!Ie(t)&&!$e(t)}p(_s,{decodeShortString:()=>Cs,encodeShortString:()=>Ss,isASCII:()=>ws,isDecimalString:()=>Es,isLongText:()=>As,isShortString:()=>bs,isShortText:()=>ks,isText:()=>vs,splitLongString:()=>xs});var ks=t=>vs(t)&&bs(t),As=t=>vs(t)&&!bs(t);function xs(t){const e=RegExp(`[^]{1,${ut}}`,"g");return t.match(e)||[]}function Ss(t){if(!ws(t))throw new Error(`${t} is not an ASCII string`);if(!bs(t))throw new Error(`${t} is too long`);return st(t.replace(/./g,(t=>t.charCodeAt(0).toString(16))))}function Cs(t){if(!ws(t))throw new Error(`${t} is not an ASCII string`);if(Ie(t))return nt(t).replace(/.{2}/g,(t=>String.fromCharCode(parseInt(t,16))));if(Es(t))return Cs("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}var Is={};p(Is,{felt:()=>ra,getAbiContractVersion:()=>Qs,getArrayType:()=>Xs,isCairo1Abi:()=>Js,isCairo1Type:()=>Ws,isLen:()=>Fs,isTypeArray:()=>Us,isTypeBool:()=>Ks,isTypeContractAddress:()=>Gs,isTypeEnum:()=>Vs,isTypeEthAddress:()=>Ys,isTypeFelt:()=>Ps,isTypeLitteral:()=>qs,isTypeNamedTuple:()=>$s,isTypeOption:()=>zs,isTypeResult:()=>js,isTypeStruct:()=>Hs,isTypeTuple:()=>Ls,isTypeUint:()=>Ms,isTypeUint256:()=>Zs,tuple:()=>ea,uint256:()=>ta});var Ts={};p(Ts,{UINT_128_MAX:()=>Os,UINT_256_MAX:()=>Ns,bnToUint256:()=>Ds,isUint256:()=>Bs,uint256ToBN:()=>Rs});var Os=(1n<<128n)-1n,Ns=(1n<<256n)-1n;function Rs(t){return(Te(t.high)<<128n)+Te(t.low)}function Bs(t){return Te(t)<=Ns}function Ds(t){const e=Te(t);if(!Bs(e))throw new Error("Number is too large");return{low:st((e&Os).toString(16)),high:st((e>>128n).toString(16))}}var Fs=t=>/_len$/.test(t),Ps=t=>"felt"===t||"core::felt252"===t,Us=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Ls=t=>/^\(.*\)$/i.test(t),$s=t=>/\(.*\)/i.test(t)&&t.includes(":"),Hs=(t,e)=>t in e,Vs=(t,e)=>t in e,zs=t=>t.startsWith("core::option::Option::"),js=t=>t.startsWith("core::result::Result::"),Ms=t=>Object.values(Nt).includes(t),qs=t=>Object.values(Rt).includes(t),Zs=t=>"core::integer::u256"===t,Ks=t=>"core::bool"===t,Gs=t=>"core::starknet::contract_address::ContractAddress"===t,Ys=t=>"core::starknet::eth_address::EthAddress"===t,Ws=t=>t.includes("::"),Xs=t=>Ws(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Js(t){const{cairo:e}=Qs(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function Qs(t){if(t.find((t=>"interface"===t.type)))return{cairo:"1",compiler:"2"};const e=t.find((t=>"function"===t.type&&(t.inputs.length||t.outputs.length)));if(!e)return{cairo:void 0,compiler:void 0};const r=e.inputs.length?e.inputs:e.outputs;return Ws(r[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var ta=t=>{const e=BigInt(t);if(!Bs(e))throw new Error("Number is too large");return{low:(e&Os).toString(10),high:(e>>128n).toString(10)}},ea=(...t)=>({...t});function ra(t){if(Oe(t)||"number"==typeof t&&Number.isInteger(t))return t.toString();if(vs(t)){if(!bs(t))throw new Error(`${t} is a long string > 31 chars, felt can store short strings, split it to array of short strings`);const e=Ss(t);return BigInt(e).toString()}if("string"==typeof t&&Ie(t))return BigInt(t).toString();if("string"==typeof t&&$e(t))return t;if("boolean"==typeof t)return""+ +t;throw new Error(`${t} can't be computed by felt()`)}var na=class{constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have a least 1 variant");if(1!==e.filter((t=>void 0!==t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){const t=Object.entries(this.variant).find((t=>void 0!==t[1]));if(void 0!==t)return t[1]}activeVariant(){const t=Object.entries(this.variant).find((t=>void 0!==t[1]));return void 0===t?"":t[0]}},sa=(t=>(t[t.Some=0]="Some",t[t.None=1]="None",t))(sa||{}),aa=class{constructor(t,e){if(!(t in sa))throw new Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(0===t){if(void 0===e)throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){if(!this.None)return this.Some}isSome(){return!(void 0===this.Some)}isNone(){return!0===this.None}},ia=(t=>(t[t.Ok=0]="Ok",t[t.Err=1]="Err",t))(ia||{}),oa=class{constructor(t,e){if(!(t in ia))throw new Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");0===t?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(void 0!==this.Ok)return this.Ok;if(void 0!==this.Err)return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!(void 0===this.Ok)}isErr(){return!(void 0===this.Err)}},ca=(t,e,r)=>{if(!Oe(t[r]))throw new Error(`Data and formatter mismatch on ${r}:${e[r]}, expected response data ${r}:${t[r]} to be BN instead it is ${typeof t[r]}`)},la=(t,e,r)=>{throw new Error(`Unhandled formatter type on ${r}:${e[r]} for data ${r}:${t[r]}`)};function ua(t,e,r){return Object.entries(t).reduce(((n,[s,a])=>{const i=r??e[s];if(!(s in e)&&!r)return n[s]=a,n;if("string"===i){if(Array.isArray(t[s])){const e=ua(t[s],t[s].map((t=>i)));return n[s]=Object.values(e).join(""),n}return ca(t,e,s),n[s]=Cs(a),n}if("number"===i)return ca(t,e,s),n[s]=Number(a),n;if("function"==typeof i)return n[s]=i(a),n;if(Array.isArray(i)){const e=ua(t[s],i,i[0]);return n[s]=Object.values(e),n}return"object"==typeof i?(n[s]=ua(t[s],i),n):(la(t,e,s),n)}),{})}function da(t){const e=function(t){return t.find((t=>"interface"===t.type))?2:Js(t)?1:0}(t);if(0===e||1===e)return new class{constructor(t){this.abi=t}methodInputsLength(t){return t.inputs.reduce(((t,e)=>Fs(e.name)?t:t+1),0)}getMethod(t){return this.abi.find((e=>e.name===t))}getLegacyFormat(){return this.abi}}(t);if(2===e)return new class{constructor(t){this.abi=t}methodInputsLength(t){return t.inputs.length}getMethod(t){return this.abi.find((t=>"interface"===t.type)).items.find((e=>e.name===t))}getLegacyFormat(){return this.abi.flatMap((t=>"interface"===t.type?t.items:t))}}(t);throw Error(`Unsupported ABI version ${e}`)}function ha(t,e,r){return"constructor"===t&&!r&&!e.length}function fa(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let r="",n=0;for(;n<t.length;){if("("===t[n]){let s=1;const a=n;for(n++;s;)")"===t[n]&&s--,"("===t[n]&&s++,n++;e.push(t.substring(a,n)),r+=" ",n--}else r+=t[n];n++}return{subTuple:e,result:r}}function pa(t){return Ws(t)?function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:r,result:n}=fa(e);return n.split(",").map((t=>r.length?t.replace(" ",r.shift()):t))}(t):function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:r,result:n}=fa(e);let s=n.split(",").map((t=>r.length?t.replace(" ",r.shift()):t));return $s(t)&&(s=s.reduce(((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e))),[])),s}(t)}function ga(t,e,r,n){const s=(t,e)=>{if(Us(e))return function(t,e){const r=Xs(e);if("string"==typeof t)return t;return t.map((t=>s(t,r)))}(t,e);if(Vs(e,n)){const r=n[e];return i(t,r)}if(Ls(e))return function(t,e){const r=pa(e).reduce(((e,r,n)=>{const a=Object.keys(t),i=r=>Object.defineProperty(e,n.toString(),{enumerable:!0,value:r??t[a[n]]}),o=r?.type?r.type:r;return i(s(t[a[n]],o)),e}),{});return r}(t,e);if(Ys(e))return t;if(Zs(e)){const r=t;if("object"!=typeof r)return r;if(!("low"in r)||!("high"in r))throw Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:r.low,high:r.high}}if(Hs(e,r)){const n=r[e].members;return a(t,n)}return t},a=(t,e)=>e.reduce(((e,r)=>{if("undefined"===t[r.name]&&(Ws(r.type)||!Fs(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);var n;return n=s(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n??t[r.name]}),e}),{});const i=(t,e)=>{if(js(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),a=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return r.isOk()?new oa(0,s(t.unwrap(),n)):new oa(1,s(t.unwrap(),a))}if(zs(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return r.isSome()?new aa(0,s(r.unwrap(),n)):new aa(1,{})}const r=t,n=Object.entries(r.variant).map((t=>{if(void 0===t[1])return t;const n=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===n?t:[t[0],s(r.unwrap(),n)]}));return new na(Object.fromEntries(n))};return e.reduce(((e,r)=>{return Fs(r.name)&&!Ws(r.type)||(n=s(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n})),e;var n}),{})}function ya(t,e){if(!0===Zs(t)){const t=ta(e);return[ra(t.low),ra(t.high)]}return ra(e)}function ma(t){if("object"==typeof t){const{low:e,high:r}=t;return[ra(e),ra(r)]}const e=ta(t);return[ra(e.low),ra(e.high)]}function _a(t,e,r,n){if(void 0===t)throw Error(`Missing parameter for type ${e}`);if(Array.isArray(t)){const s=[];s.push(ra(t.length));const a=Xs(e);return t.reduce(((t,e)=>t.concat(_a(e,a,r,n))),s)}if(r[e]&&r[e].members.length){if(Zs(e))return ma(t);if("core::starknet::eth_address::EthAddress"===e)return ya(e,t);const{members:s}=r[e],a=t;return s.reduce(((t,e)=>t.concat(_a(a[e.name],e.type,r,n))),[])}if(Ls(e)){const s=function(t,e){const r=pa(e),n=Object.values(t);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${n} \n      expected: ${r}`);return r.map(((t,e)=>({element:n[e],type:t.type??t})))}(t,e);return s.reduce(((t,e)=>{const s=_a(e.element,e.type,r,n);return t.concat(s)}),[])}if(Zs(e))return ma(t);if(Vs(e,n)){const{variants:s}=n[e];if(zs(e)){const e=t;if(e.isSome()){const t=s.find((t=>"Some"===t.name));if(void 0===t)throw Error("Error in abi : Option has no 'Some' variant.");const a=t.type;if("()"===a)return(0).toString();const i=_a(e.unwrap(),a,r,n);return Array.isArray(i)?[(0).toString(),...i]:[(0).toString(),i]}return 1..toString()}if(js(e)){const e=t;if(e.isOk()){const t=s.find((t=>"Ok"===t.name));if(void 0===t)throw Error("Error in abi : Result has no 'Ok' variant.");const a=t.type;if("()"===a)return(0).toString();const i=_a(e.unwrap(),a,r,n);return Array.isArray(i)?[(0).toString(),...i]:[(0).toString(),i]}const a=s.find((t=>"Err"===t.name));if(void 0===a)throw Error("Error in abi : Result has no 'Err' variant.");const i=a.type;if("()"===i)return 1..toString();const o=_a(e.unwrap(),i,r,n);return Array.isArray(o)?[1..toString(),...o]:[1..toString(),o]}const a=t,i=a.activeVariant(),o=s.find((t=>t.name===i));if(void 0===o)throw Error(`Not find in abi : Enum has no '${i}' variant.`);const c=o.type,l=s.findIndex((t=>t.name===i));if("()"===c)return l.toString();const u=_a(a.unwrap(),c,r,n);return Array.isArray(u)?[l.toString(),...u]:[l.toString(),u]}if("object"==typeof t)throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return ya(e,t)}function wa(t,e){let r;switch(!0){case Ks(t):return r=e.next().value,Boolean(BigInt(r));case Zs(t):return Rs({low:e.next().value,high:e.next().value});default:return r=e.next().value,BigInt(r)}}function ba(t,e,r,n){if("()"===e.type)return{};if(Zs(e.type)){return Rs({low:t.next().value,high:t.next().value})}if(Us(e.type)){const s=[],a={name:"",type:Xs(e.type)},i=BigInt(t.next().value);for(;s.length<i;)s.push(ba(t,a,r,n));return s}if(r&&e.type in r&&r[e.type])return"core::starknet::eth_address::EthAddress"===e.type?wa(e.type,t):r[e.type].members.reduce(((e,s)=>(e[s.name]=ba(t,s,r,n),e)),{});if(n&&e.type in n&&n[e.type]){const s=Number(t.next().value),a=n[e.type].variants.reduce(((e,a,i)=>i===s?(e[a.name]=ba(t,{name:"",type:a.type},r,n),e):(e[a.name]=void 0,e)),{});if(e.type.startsWith("core::option::Option")){const t=0===s?a.Some:void 0;return new aa(s,t)}if(e.type.startsWith("core::result::Result")){let t;return t=0===s?a.Ok:a.Err,new oa(s,t)}return new na(a)}if(Ls(e.type)){return pa(e.type).reduce(((e,s,a)=>{const i=s?.name?s.name:a,o={name:i,type:s?.type?s.type:s};return e[i]=ba(t,o,r,n),e}),{})}if(Us(e.type)){const s=[],a={name:"",type:Xs(e.type)},i=BigInt(t.next().value);for(;s.length<i;)s.push(ba(t,a,r,n));return s}return wa(e.type,t)}function Ea(t,e,r,n,s){const{name:a,type:i}=e;let o;switch(!0){case Fs(a):return o=t.next().value,BigInt(o);case r&&i in r||Ls(i):case n&&Vs(i,n):return ba(t,e,r,n);case Us(i):if(Ws(i))return ba(t,e,r,n);const c=[];if(s&&s[`${a}_len`]){const i=s[`${a}_len`];for(;c.length<i;)c.push(ba(t,{name:a,type:e.type.replace("*","")},r,n))}return c;default:return wa(i,t)}}var va=(t,e)=>{if(Jt("string"==typeof t||"number"==typeof t||"bigint"==typeof t,`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),"string"==typeof t&&!Ie(t))return;const r=BigInt(t.toString(10));Jt(r>=0n&&r<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},ka=(t,e)=>{"number"==typeof t&&Jt(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),Jt("string"==typeof t||"number"==typeof t||"bigint"==typeof t||"object"==typeof t&&"low"in t&&"high"in t,`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`);const r="object"==typeof t?Rs(t):Te(t);switch(e.type){case"core::integer::u8":Jt(r>=0n&&r<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case"core::integer::u16":Jt(r>=0n&&r<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case"core::integer::u32":Jt(r>=0n&&r<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case"core::integer::u64":Jt(r>=0n&&r<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case"core::integer::u128":Jt(r>=0n&&r<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case"core::integer::u256":Jt(r>=0n&&r<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} 0 - 2^256-1`);break;case"core::starknet::class_hash::ClassHash":case"core::starknet::contract_address::ContractAddress":Jt(r>=0n&&r<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)}},Aa=(t,e)=>{Jt("boolean"==typeof t,`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},xa=(t,e,r)=>{if("core::integer::u256"!==e.type)if("core::starknet::eth_address::EthAddress"!==e.type)Jt("object"==typeof t&&!Array.isArray(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as js object (not array)`),r[e.type].members.forEach((({name:r})=>{Jt(Object.keys(t).includes(r),`Validate: arg ${e.name} should have a property ${r}`)}));else{Jt("object"!=typeof t,`EthAdress type is waiting a BigNumberish. Got ${t}`);const r=BigInt(t.toString(10));Jt(r>=0n&&r<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`)}else ka(t,e)},Sa=(t,e)=>{Jt("object"==typeof t&&!Array.isArray(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as js object (not array)`);const r=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),n=[...Object.getOwnPropertyNames(t),...r];if(!(zs(e.type)&&n.includes("isSome")&&n.includes("isNone")||js(e.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received ${t}, is not an Enum.`)},Ca=(t,e)=>{Jt("object"==typeof t&&!Array.isArray(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},Ia=(t,e,r,n)=>{const s=Xs(e.type);if(!Ps(s)||!As(t))switch(Jt(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),!0){case Ps(s):t.forEach((t=>va(t,e)));break;case Ls(s):t.forEach((t=>Ca(t,{name:e.name,type:s})));break;case Us(s):t.forEach((t=>Ia(t,{name:"",type:s},r,n)));break;case Hs(s,r):t.forEach((t=>xa(t,{name:e.name,type:s},r)));break;case Vs(s,n):t.forEach((t=>Sa(t,{name:e.name,type:s})));break;case Ms(s)||qs(s):t.forEach((t=>ka(t,e)));break;case Ks(s):t.forEach((t=>Aa(t,e)));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${t}`)}};function Ta(t,e,r,n){t.inputs.reduce(((t,s)=>{const a=e[t];switch(!0){case Fs(s.name):return t;case Ps(s.type):va(a,s);break;case Ms(s.type)||qs(s.type):ka(a,s);break;case Ks(s.type):Aa(a,s);break;case Us(s.type):Ia(a,s,r,n);break;case Hs(s.type,r):xa(a,s,r);break;case Vs(s.type,n):Sa(a,s);break;case Ls(s.type):Ca(a,s);break;default:throw new Error(`Validate Unhandled: argument ${s.name}, type ${s.type}, value ${a}`)}return t+1}),0)}var Oa=class{constructor(t){this.structs=Oa.getAbiStruct(t),this.enums=Oa.getAbiEnum(t),this.parser=da(t),this.abi=this.parser.getLegacyFormat()}validate(t,e,r=[]){if("DEPLOY"!==t){Jt(this.abi.filter((e=>{if("function"!==e.type)return!1;const r="view"===e.stateMutability||"view"===e.state_mutability;return"INVOKE"===t?!r:r})).map((t=>t.name)).includes(e),("INVOKE"===t?"invocable":"viewable")+" method not found in abi")}const n=this.abi.find((r=>"DEPLOY"===t?r.name===e&&"constructor"===r.type:r.name===e&&"function"===r.type));if(ha(e,r,n))return;const s=this.parser.methodInputsLength(n);if(r.length!==s)throw Error(`Invalid number of arguments, expected ${s} arguments, but got ${r.length}`);Ta(n,r,this.structs,this.enums)}compile(t,e){const r=this.abi.find((e=>e.name===t));if(ha(t,e,r))return[];let n;if(Array.isArray(e))n=e;else{const t=ga(e,r.inputs,this.structs,this.enums);n=Object.values(t),Ta(r,n,this.structs,this.enums)}const s=n[Symbol.iterator](),a=r.inputs.reduce(((t,e)=>Fs(e.name)&&!Ws(e.type)?t:t.concat(function(t,e,r,n){const{name:s,type:a}=e;let{value:i}=t.next();switch(!0){case Us(a):if(!Array.isArray(i)&&!vs(i))throw Error(`ABI expected parameter ${s} to be array or long string, got ${i}`);return"string"==typeof i&&(i=xs(i)),_a(i,e.type,r,n);case"core::starknet::eth_address::EthAddress"===a:return ya(a,i);case Hs(a,r)||Ls(a)||Zs(a):case Vs(a,n):return _a(i,a,r,n);default:return ya(a,i)}}(s,e,this.structs,this.enums))),[]);return Object.defineProperty(a,"__compiled__",{enumerable:!1,writable:!1,value:!0}),a}static compile(t){const e=t=>{const e=(t,r=".")=>{const n=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(n).flatMap((([t,s])=>{let a=s;As(a)&&(a=xs(a)),"entrypoint"===t&&(a=ys(a));const i=Array.isArray(n)&&"0"===t?"$$len":t;if(Oe(a))return[[`${r}${i}`,ra(a)]];if(Object(a)===a){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(a)),n=[...Object.getOwnPropertyNames(a),...t];if(n.includes("isSome")&&n.includes("isNone")){const t=a,n=t.isSome()?0:1;return t.isSome()?e({0:n,1:t.unwrap()},`${r}${i}.`):[[`${r}${i}`,ra(n)]]}if(n.includes("isOk")&&n.includes("isErr")){const t=a,n=t.isOk()?0:1;return e({0:n,1:t.unwrap()},`${r}${i}.`)}if(n.includes("variant")&&n.includes("activeVariant")){const t=a,n=t.activeVariant(),s=Object.keys(t.variant).findIndex((t=>t===n));return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[`${r}${i}`,ra(s)]]:e({0:s,1:t.unwrap()},`${r}${i}.`)}return e(a,`${r}${i}.`)}return[[`${r}${i}`,ra(a)]]}))};return Object.fromEntries(e(t))};let r;if(Array.isArray(t)){const n=e({...t});r=Object.values(n)}else{const n=e(t);r=Object.values(n)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,e){const{outputs:r}=this.abi.find((e=>e.name===t)),n=e.flat()[Symbol.iterator](),s=r.flat().reduce(((t,e,r)=>{const s=e.name??r;return t[s]=Ea(n,e,this.structs,this.enums,t),t[s]&&t[`${s}_len`]&&delete t[`${s}_len`],t}),{});return 1===Object.keys(s).length&&0 in s?s[0]:s}format(t,e,r){return ua(this.parse(t,e),r)}static getAbiStruct(t){return t.filter((t=>"struct"===t.type)).reduce(((t,e)=>({...t,[e.name]:e})),{})}static getAbiEnum(t){const e=t.filter((t=>"enum"===t.type)).reduce(((t,e)=>({...t,[e.name]:e})),{});return delete e["core::bool"],e}static toCalldata(t=[]){return Oa.compile(t)}static toHex(t=[]){return Oa.compile(t).map((t=>Ne(t)))}},Na={};p(Na,{calculateContractAddressFromHash:()=>Wi,calculateDeclareTransactionHash:()=>Ki,calculateDeployAccountTransactionHash:()=>Gi,calculateDeployTransactionHash:()=>Zi,calculateTransactionHash:()=>Yi,calculateTransactionHashCommon:()=>qi,computeCompiledClassHash:()=>ro,computeContractClassHash:()=>ao,computeHashOnElements:()=>Mi,computeLegacyContractClassHash:()=>to,computeSierraContractClassHash:()=>so,default:()=>Qi,feeTransactionVersion:()=>Vi,feeTransactionVersion_2:()=>zi,formatSpaces:()=>Ji,getSelector:()=>ms,getSelectorFromName:()=>ys,getVersionsByType:()=>ji,keccakBn:()=>ps,poseidon:()=>Xr,starknetKeccak:()=>gs,transactionVersion:()=>$i,transactionVersion_2:()=>Hi});var Ra={};p(Ra,{starkCurve:()=>Ze,weierstrass:()=>en});var Ba={};function Da(t){return Fa.test(t)}p(Ba,{parse:()=>Fi,parseAlwaysAsBig:()=>Pi,stringify:()=>Ui,stringifyAlwaysAsBig:()=>Li});var Fa=/^-?[0-9]+$/;function Pa(t){return Ua.test(t)}var Ua=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;var La=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function $a(t){if(!function(t,e){var r=parseFloat(t),n=String(r),s=Ha(t),a=Ha(n);if(s===a)return!0;if(!0===(null==e?void 0:e.approx)&&!Da(t)&&a.length>=14&&s.startsWith(a.substring(0,14)))return!0;return!1}(t,{approx:!1})){if(Da(t))return La.truncate_integer;var e=parseFloat(t);return isFinite(e)?0===e?La.underflow:La.truncate_float:La.overflow}}function Ha(t){return t.replace(Va,"").replace(ja,"").replace(Ma,"").replace(za,"")}var Va=/[eE][+-]?\d+$/,za=/^-?(0*)?/,ja=/\./,Ma=/0+$/;function qa(t){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Za(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ka(n.key),n)}}function Ka(t){var e=function(t,e){if("object"!==qa(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===qa(e)?e:String(e)}var Ga=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=Ka(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"isLosslessNumber",!0),!Pa(e))throw new Error('Invalid number (value: "'+e+'")');this.value=e}var e,r,n;return e=t,(r=[{key:"valueOf",value:function(){var t=$a(this.value);if(void 0===t||t===La.truncate_float)return parseFloat(this.value);if(Da(this.value))return BigInt(this.value);throw new Error("Cannot safely convert to number: "+"the value '".concat(this.value,"' would ").concat(t," and become ").concat(parseFloat(this.value)))}},{key:"toString",value:function(){return this.value}}])&&Za(e.prototype,r),n&&Za(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ya(t){return new Ga(t)}function Wa(t){return Da(t)?BigInt(t):parseFloat(t)}function Xa(t){return(Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ja(t,e,r,n){return Array.isArray(r)?n.call(t,e,function(t,e){for(var r=0;r<t.length;r++)t[r]=Ja(t,r+"",t[r],e);return t}(r,n)):r&&"object"===Xa(r)&&!function(t){return t&&"object"===qa(t)&&!0===t.isLosslessNumber||!1}(r)?n.call(t,e,function(t,e){return Object.keys(t).forEach((function(r){var n=Ja(t,r,t[r],e);void 0!==n?t[r]=n:delete t[r]})),t}(r,n)):n.call(t,e,r)}function Qa(t){return(Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t){return function(t){if(Array.isArray(t))return ei(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ei(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ei(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ri(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ya,n=0,s=o();return function(t){if(void 0===t)throw new SyntaxError("JSON value expected ".concat(v()))}(s),function(){if(n<t.length)throw new SyntaxError("Expected end of input ".concat(v()))}(),e?function(t,e){return Ja({"":t},"",t,e)}(s,e):s;function a(){if(t.charCodeAt(n)===li){n++,l();for(var e={},r=!0;n<t.length&&t.charCodeAt(n)!==ui;){r?r=!1:(d(),l());var s=n,a=u();void 0===a&&g(),l(),h();var i=o();void 0===i&&w(),Object.prototype.hasOwnProperty.call(e,a)&&!ai(i,e[a])&&y(a,s+1),e[a]=i}return t.charCodeAt(n)!==ui&&function(){throw new SyntaxError("Quoted object key or end of object '}' expected ".concat(v()))}(),n++,e}}function i(){if(t.charCodeAt(n)===di){n++,l();for(var e=[],r=!0;n<t.length&&t.charCodeAt(n)!==hi;){r?r=!1:d();var s=o();f(s),e.push(s)}return t.charCodeAt(n)!==hi&&function(){throw new SyntaxError("Array item or end of array ']' expected ".concat(v()))}(),n++,e}}function o(){var e,s,o,d,h,f;l();var g=null!==(e=null!==(s=null!==(o=null!==(d=null!==(h=null!==(f=u())&&void 0!==f?f:function(){var e=n;t.charCodeAt(n)===wi&&(n++,p(e));if(t.charCodeAt(n)===bi)n++;else if(s=t.charCodeAt(n),s>=Ei&&s<=vi)for(n++;si(t.charCodeAt(n));)n++;var s;if(t.charCodeAt(n)===Ai)for(n++,p(e);si(t.charCodeAt(n));)n++;if(t.charCodeAt(n)===Ti||t.charCodeAt(n)===Ii)for(n++,t.charCodeAt(n)!==wi&&t.charCodeAt(n)!==_i||n++,p(e);si(t.charCodeAt(n));)n++;if(n>e)return r(t.slice(e,n))}())&&void 0!==h?h:a())&&void 0!==d?d:i())&&void 0!==o?o:c("true",!0))&&void 0!==s?s:c("false",!1))&&void 0!==e?e:c("null",null);return l(),g}function c(e,r){if(t.slice(n,n+e.length)===e)return n+=e.length,r}function l(){for(;(e=t.charCodeAt(n))===fi||e===pi||e===gi||e===yi;)n++;var e}function u(){if(t.charCodeAt(n)===mi){n++;for(var e="";n<t.length&&t.charCodeAt(n)!==mi;){if(t.charCodeAt(n)===ci){var r=t[n+1],s=oi[r];void 0!==s?(e+=s,n++):"u"===r?ni(t.charCodeAt(n+2))&&ni(t.charCodeAt(n+3))&&ni(t.charCodeAt(n+4))&&ni(t.charCodeAt(n+5))?(e+=String.fromCharCode(parseInt(t.slice(n+2,n+6),16)),n+=5):b(n):_(n)}else(a=t.charCodeAt(n))>=32&&a<=1114111?e+=t[n]:m(t[n]);n++}return function(){if(t.charCodeAt(n)!==mi)throw new SyntaxError("End of string '\"' expected ".concat(v()))}(),n++,e}var a}function d(){if(t.charCodeAt(n)!==ki)throw new SyntaxError("Comma ',' expected after value ".concat(v()));n++}function h(){if(t.charCodeAt(n)!==xi)throw new SyntaxError("Colon ':' expected after property name ".concat(v()));n++}function f(t){if(void 0===t)throw new SyntaxError("Array item expected ".concat(v()))}function p(e){if(!si(t.charCodeAt(n))){var r=t.slice(e,n);throw new SyntaxError("Invalid number '".concat(r,"', expecting a digit ").concat(v()))}}function g(){throw new SyntaxError("Quoted object key expected ".concat(v()))}function y(t,e){throw new SyntaxError("Duplicate key '".concat(t,"' encountered at position ").concat(e))}function m(t){throw new SyntaxError("Invalid character '".concat(t,"' ").concat(E()))}function _(e){var r=t.slice(e,e+2);throw new SyntaxError("Invalid escape character '".concat(r,"' ").concat(E()))}function w(){throw new SyntaxError("Object value expected after ':' ".concat(E()))}function b(e){for(var r=e+2;/\w/.test(t[r]);)r++;var n=t.slice(e,r);throw new SyntaxError("Invalid unicode character '".concat(n,"' ").concat(E()))}function E(){return"at position ".concat(n)}function v(){return(n<t.length?"but got '".concat(t[n],"'"):"but reached end of input")+" "+E()}}function ni(t){return t>=bi&&t<=vi||t>=Si&&t<=Oi||t>=Ci&&t<=Ni}function si(t){return t>=bi&&t<=vi}function ai(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((function(t,r){return ai(t,e[r])})):!(!ii(t)||!ii(e))&&ti(new Set([].concat(ti(Object.keys(t)),ti(Object.keys(e))))).every((function(r){return ai(t[r],e[r])})))}function ii(t){return"object"===Qa(t)&&null!==t}var oi={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},ci=92,li=123,ui=125,di=91,hi=93,fi=32,pi=10,gi=9,yi=13,mi=34,_i=43,wi=45,bi=48,Ei=49,vi=57,ki=44,Ai=46,xi=58,Si=65,Ci=97,Ii=69,Ti=101,Oi=70,Ni=102;function Ri(t){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bi(t,e,r,n){var s=function(t){if("number"==typeof t)return" ".repeat(t);if("string"==typeof t&&""!==t)return t;return}(r);return a("function"==typeof e?e.call({"":t},"",t):t,"");function a(t,i){if(Array.isArray(n)){var o=n.find((function(e){return e.test(t)}));if(o){var c=o.stringify(t);if("string"!=typeof c||!Pa(c))throw new Error("Invalid JSON number: output of a number stringifier must be a string containing a JSON number "+"(output: ".concat(c,")"));return c}}return"boolean"==typeof t||"number"==typeof t||"string"==typeof t||null===t||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String?JSON.stringify(t):t&&t.isLosslessNumber||"bigint"==typeof t?t.toString():Array.isArray(t)?function(t,r){if(0===t.length)return"[]";for(var n=s?r+s:void 0,i=s?"[\n":"[",o=0;o<t.length;o++){var c="function"==typeof e?e.call(t,String(o),t[o]):t[o];s&&(i+=n),i+=void 0!==c&&"function"!=typeof c?a(c,n):"null",o<t.length-1&&(i+=s?",\n":",")}return i+=s?"\n"+r+"]":"]",i}(t,i):t&&"object"===Ri(t)?function(t,n){if("function"==typeof t.toJSON)return Bi(t.toJSON(),e,r,void 0);var i=Array.isArray(e)?e.map(String):Object.keys(t);if(0===i.length)return"{}";var o=s?n+s:void 0,c=!0,l=s?"{\n":"{";return i.forEach((function(r){var n="function"==typeof e?e.call(t,r,t[r]):t[r];if(function(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!==Ri(e)}(0,n)){c?c=!1:l+=s?",\n":",";var i=JSON.stringify(r);l+=s?o+i+": ":i+":",l+=a(n,o)}})),l+=s?"\n"+n+"}":"}",l}(t,i):void 0}}var Di=t=>{if(!Da(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},Fi=t=>ri(String(t),void 0,Di),Pi=t=>ri(String(t),void 0,Wa),Ui=(t,e,r,n)=>Bi(t,e,r,n),Li=Ui,$i=ft,Hi=pt,Vi=gt,zi=yt;function ji(t){return"fee"===t?{v1:Vi,v2:zi}:{v1:$i,v2:Hi}}function Mi(t){return[...t,t.length].reduce(((t,e)=>Ze.pedersen(Te(t),Te(e))),0).toString()}function qi(t,e,r,n,s,a,i,o=[]){const c=Mi(s);return Mi([t,e,r,n,c,a,i,...o])}function Zi(t,e,r,n,s="constructor"){return qi("0x6465706c6f79",r,t,ys(s),e,0,n)}function Ki(t,e,r,n,s,a,i){return qi("0x6465636c617265",r,e,0,[t],n,s,[a,...i?[i]:[]])}function Gi(t,e,r,n,s,a,i,o){return qi("0x6465706c6f795f6163636f756e74",s,t,0,[e,n,...r],a,i,[o])}function Yi(t,e,r,n,s,a){return qi("0x696e766f6b65",e,t,0,r,n,s,[a])}function Wi(t,e,r,n){const s=Mi(Oa.compile(r));return Mi([ra("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,t,e,s])}function Xi(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function Ji(t){let e=!1;const r=[];for(const n of t)'"'===n&&!1==(r.length>0&&"\\"===r.slice(-1)[0])&&(e=!e),e?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function Qi(t){const{abi:e,program:r}=t,n=Ji(Ui({abi:e,program:r},Xi));return st(Ze.keccak(J(n)).toString(16))}function to(t){const e="string"==typeof t?Fi(t):t,r=Ne(bt),n=Mi(e.entry_points_by_type.EXTERNAL.flatMap((t=>[t.selector,t.offset]))),s=Mi(e.entry_points_by_type.L1_HANDLER.flatMap((t=>[t.selector,t.offset]))),a=Mi(e.entry_points_by_type.CONSTRUCTOR.flatMap((t=>[t.selector,t.offset]))),i=Mi(e.program.builtins.map((t=>Ss(t)))),o=Qi(e),c=Mi(e.program.data);return Mi([r,n,s,a,i,o,c])}function eo(t){const e=t.flatMap((t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,fs(e.flatMap((t=>BigInt(Ss(t))))))];var e}));return fs(e)}function ro(t){const e=BigInt(Ss("COMPILED_CLASS_V1")),r=eo(t.entry_points_by_type.EXTERNAL),n=eo(t.entry_points_by_type.L1_HANDLER),s=eo(t.entry_points_by_type.CONSTRUCTOR),a=fs(t.bytecode.map((t=>BigInt(t))));return Ne(fs([e,r,n,s,a]))}function no(t){return fs(t.flatMap((t=>[BigInt(t.selector),BigInt(t.function_idx)])))}function so(t){const e=BigInt(Ss("CONTRACT_CLASS_V0.1.0")),r=no(t.entry_points_by_type.EXTERNAL),n=no(t.entry_points_by_type.L1_HANDLER),s=no(t.entry_points_by_type.CONSTRUCTOR),a=function(t){const e=Ji(Ui(t.abi,null));return BigInt(st(Ze.keccak(J(e)).toString(16)))}(t),i=fs(t.sierra_program.map((t=>BigInt(t))));return Ne(fs([e,r,n,s,a,i]))}function ao(t){const e="string"==typeof t?Fi(t):t;return"sierra_program"in e?so(e):to(e)}var io={};p(io,{compressProgram:()=>vu,decompressProgram:()=>ku,estimatedFeeToMaxFee:()=>Tu,formatSignature:()=>Su,makeAddress:()=>xu,randomAddress:()=>Au,signatureToDecimalArray:()=>Cu,signatureToHexArray:()=>Iu});function oo(t){let e=t.length;for(;--e>=0;)t[e]=0}var co=256,lo=286,uo=30,ho=15,fo=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),po=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),go=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),yo=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mo=new Array(576);oo(mo);var _o=new Array(60);oo(_o);var wo=new Array(512);oo(wo);var bo=new Array(256);oo(bo);var Eo=new Array(29);oo(Eo);var vo,ko,Ao,xo=new Array(uo);function So(t,e,r,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}function Co(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}oo(xo);var Io=t=>t<256?wo[t]:wo[256+(t>>>7)],To=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},Oo=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,To(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},No=(t,e,r)=>{Oo(t,r[2*e],r[2*e+1])},Ro=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},Bo=(t,e,r)=>{const n=new Array(16);let s,a,i=0;for(s=1;s<=ho;s++)i=i+r[s-1]<<1,n[s]=i;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=Ro(n[e]++,e))}},Do=t=>{let e;for(e=0;e<lo;e++)t.dyn_ltree[2*e]=0;for(e=0;e<uo;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Fo=t=>{t.bi_valid>8?To(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Po=(t,e,r,n)=>{const s=2*e,a=2*r;return t[s]<t[a]||t[s]===t[a]&&n[e]<=n[r]},Uo=(t,e,r)=>{const n=t.heap[r];let s=r<<1;for(;s<=t.heap_len&&(s<t.heap_len&&Po(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!Po(e,n,t.heap[s],t.depth));)t.heap[r]=t.heap[s],r=s,s<<=1;t.heap[r]=n},Lo=(t,e,r)=>{let n,s,a,i,o=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+o++],n+=(255&t.pending_buf[t.sym_buf+o++])<<8,s=t.pending_buf[t.sym_buf+o++],0===n?No(t,s,e):(a=bo[s],No(t,a+co+1,e),i=fo[a],0!==i&&(s-=Eo[a],Oo(t,s,i)),n--,a=Io(n),No(t,a,r),i=po[a],0!==i&&(n-=xo[a],Oo(t,n,i)))}while(o<t.sym_next);No(t,256,e)},$o=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.elems;let i,o,c,l=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<a;i++)0!==r[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):r[2*i+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,r[2*c]=1,t.depth[c]=0,t.opt_len--,s&&(t.static_len-=n[2*c+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)Uo(t,r,i);c=a;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Uo(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=o,r[2*c]=r[2*i]+r[2*o],t.depth[c]=(t.depth[i]>=t.depth[o]?t.depth[i]:t.depth[o])+1,r[2*i+1]=r[2*o+1]=c,t.heap[1]=c++,Uo(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,i=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,u,d,h,f,p,g=0;for(h=0;h<=ho;h++)t.bl_count[h]=0;for(r[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)u=t.heap[l],h=r[2*r[2*u+1]+1]+1,h>c&&(h=c,g++),r[2*u+1]=h,u>n||(t.bl_count[h]++,f=0,u>=o&&(f=i[u-o]),p=r[2*u],t.opt_len+=p*(h+f),a&&(t.static_len+=p*(s[2*u+1]+f)));if(0!==g){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(u=t.bl_count[h];0!==u;)d=t.heap[--l],d>n||(r[2*d+1]!==h&&(t.opt_len+=(h-r[2*d+1])*r[2*d],r[2*d+1]=h),u--)}})(t,e),Bo(r,l,t.bl_count)},Ho=(t,e,r)=>{let n,s,a=-1,i=e[1],o=0,c=7,l=4;for(0===i&&(c=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)s=i,i=e[2*(n+1)+1],++o<c&&s===i||(o<l?t.bl_tree[2*s]+=o:0!==s?(s!==a&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=s,0===i?(c=138,l=3):s===i?(c=6,l=3):(c=7,l=4))},Vo=(t,e,r)=>{let n,s,a=-1,i=e[1],o=0,c=7,l=4;for(0===i&&(c=138,l=3),n=0;n<=r;n++)if(s=i,i=e[2*(n+1)+1],!(++o<c&&s===i)){if(o<l)do{No(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==a&&(No(t,s,t.bl_tree),o--),No(t,16,t.bl_tree),Oo(t,o-3,2)):o<=10?(No(t,17,t.bl_tree),Oo(t,o-3,3)):(No(t,18,t.bl_tree),Oo(t,o-11,7));o=0,a=s,0===i?(c=138,l=3):s===i?(c=6,l=3):(c=7,l=4)}},zo=!1,jo=(t,e,r,n)=>{Oo(t,0+(n?1:0),3),Fo(t),To(t,r),To(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},Mo={_tr_init:t=>{zo||((()=>{let t,e,r,n,s;const a=new Array(16);for(r=0,n=0;n<28;n++)for(Eo[n]=r,t=0;t<1<<fo[n];t++)bo[r++]=n;for(bo[r-1]=n,s=0,n=0;n<16;n++)for(xo[n]=s,t=0;t<1<<po[n];t++)wo[s++]=n;for(s>>=7;n<uo;n++)for(xo[n]=s<<7,t=0;t<1<<po[n]-7;t++)wo[256+s++]=n;for(e=0;e<=ho;e++)a[e]=0;for(t=0;t<=143;)mo[2*t+1]=8,t++,a[8]++;for(;t<=255;)mo[2*t+1]=9,t++,a[9]++;for(;t<=279;)mo[2*t+1]=7,t++,a[7]++;for(;t<=287;)mo[2*t+1]=8,t++,a[8]++;for(Bo(mo,287,a),t=0;t<uo;t++)_o[2*t+1]=5,_o[2*t]=Ro(t,5);vo=new So(mo,fo,257,lo,ho),ko=new So(_o,po,0,uo,ho),Ao=new So(new Array(0),go,0,19,7)})(),zo=!0),t.l_desc=new Co(t.dyn_ltree,vo),t.d_desc=new Co(t.dyn_dtree,ko),t.bl_desc=new Co(t.bl_tree,Ao),t.bi_buf=0,t.bi_valid=0,Do(t)},_tr_stored_block:jo,_tr_flush_block:(t,e,r,n)=>{let s,a,i=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<co;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),$o(t,t.l_desc),$o(t,t.d_desc),i=(t=>{let e;for(Ho(t,t.dyn_ltree,t.l_desc.max_code),Ho(t,t.dyn_dtree,t.d_desc.max_code),$o(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*yo[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=s&&(s=a)):s=a=r+5,r+4<=s&&-1!==e?jo(t,e,r,n):4===t.strategy||a===s?(Oo(t,2+(n?1:0),3),Lo(t,mo,_o)):(Oo(t,4+(n?1:0),3),((t,e,r,n)=>{let s;for(Oo(t,e-257,5),Oo(t,r-1,5),Oo(t,n-4,4),s=0;s<n;s++)Oo(t,t.bl_tree[2*yo[s]+1],3);Vo(t,t.dyn_ltree,e-1),Vo(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,i+1),Lo(t,t.dyn_ltree,t.dyn_dtree)),Do(t),n&&Fo(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(bo[r]+co+1)]++,t.dyn_dtree[2*Io(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{Oo(t,2,3),No(t,256,mo),(t=>{16===t.bi_valid?(To(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},qo=(t,e,r,n)=>{let s=65535&t|0,a=t>>>16&65535|0,i=0;for(;0!==r;){i=r>2e3?2e3:r,r-=i;do{s=s+e[n++]|0,a=a+s|0}while(--i);s%=65521,a%=65521}return s|a<<16|0},Zo=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})()),Ko=(t,e,r,n)=>{const s=Zo,a=n+r;t^=-1;for(let r=n;r<a;r++)t=t>>>8^s[255&(t^e[r])];return-1^t},Go={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Yo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Wo,_tr_stored_block:Xo,_tr_flush_block:Jo,_tr_tally:Qo,_tr_align:tc}=Mo,{Z_NO_FLUSH:ec,Z_PARTIAL_FLUSH:rc,Z_FULL_FLUSH:nc,Z_FINISH:sc,Z_BLOCK:ac,Z_OK:ic,Z_STREAM_END:oc,Z_STREAM_ERROR:cc,Z_DATA_ERROR:lc,Z_BUF_ERROR:uc,Z_DEFAULT_COMPRESSION:dc,Z_FILTERED:hc,Z_HUFFMAN_ONLY:fc,Z_RLE:pc,Z_FIXED:gc,Z_DEFAULT_STRATEGY:yc,Z_UNKNOWN:mc,Z_DEFLATED:_c}=Yo,wc=258,bc=262,Ec=42,vc=113,kc=666,Ac=(t,e)=>(t.msg=Go[e],e),xc=t=>2*t-(t>4?9:0),Sc=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Cc=t=>{let e,r,n,s=t.w_size;e=t.hash_size,n=e;do{r=t.head[--n],t.head[n]=r>=s?r-s:0}while(--e);e=s,n=e;do{r=t.prev[--n],t.prev[n]=r>=s?r-s:0}while(--e)},Ic=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,Tc=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},Oc=(t,e)=>{Jo(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Tc(t.strm)},Nc=(t,e)=>{t.pending_buf[t.pending++]=e},Rc=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Bc=(t,e,r,n)=>{let s=t.avail_in;return s>n&&(s=n),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),r),1===t.state.wrap?t.adler=qo(t.adler,e,s,r):2===t.state.wrap&&(t.adler=Ko(t.adler,e,s,r)),t.next_in+=s,t.total_in+=s,s)},Dc=(t,e)=>{let r,n,s=t.max_chain_length,a=t.strstart,i=t.prev_length,o=t.nice_match;const c=t.strstart>t.w_size-bc?t.strstart-(t.w_size-bc):0,l=t.window,u=t.w_mask,d=t.prev,h=t.strstart+wc;let f=l[a+i-1],p=l[a+i];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(r=e,l[r+i]===p&&l[r+i-1]===f&&l[r]===l[a]&&l[++r]===l[a+1]){a+=2,r++;do{}while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<h);if(n=wc-(h-a),a=h-wc,n>i){if(t.match_start=e,i=n,n>=o)break;f=l[a+i-1],p=l[a+i]}}}while((e=d[e&u])>c&&0!=--s);return i<=t.lookahead?i:t.lookahead},Fc=t=>{const e=t.w_size;let r,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-bc)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Cc(t),n+=e),0===t.strm.avail_in)break;if(r=Bc(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Ic(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Ic(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<bc&&0!==t.strm.avail_in)},Pc=(t,e)=>{let r,n,s,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,i=0,o=t.strm.avail_in;do{if(r=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,n=t.strstart-t.block_start,r>n+t.strm.avail_in&&(r=n+t.strm.avail_in),r>s&&(r=s),r<a&&(0===r&&e!==sc||e===ec||r!==n+t.strm.avail_in))break;i=e===sc&&r===n+t.strm.avail_in?1:0,Xo(t,0,0,i),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Tc(t.strm),n&&(n>r&&(n=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,r-=n),r&&(Bc(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(0===i);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),i?4:e!==ec&&e!==sc&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(Bc(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,a=s>t.w_size?t.w_size:s,n=t.strstart-t.block_start,(n>=a||(n||e===sc)&&e!==ec&&0===t.strm.avail_in&&n<=s)&&(r=n>s?s:n,i=e===sc&&0===t.strm.avail_in&&r===n?1:0,Xo(t,t.block_start,r,i),t.block_start+=r,Tc(t.strm)),i?3:1)},Uc=(t,e)=>{let r,n;for(;;){if(t.lookahead<bc){if(Fc(t),t.lookahead<bc&&e===ec)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=Ic(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-bc&&(t.match_length=Dc(t,r)),t.match_length>=3)if(n=Qo(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Ic(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Ic(t,t.ins_h,t.window[t.strstart+1]);else n=Qo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Oc(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===sc?(Oc(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Oc(t,!1),0===t.strm.avail_out)?1:2},Lc=(t,e)=>{let r,n,s;for(;;){if(t.lookahead<bc){if(Fc(t),t.lookahead<bc&&e===ec)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=Ic(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-bc&&(t.match_length=Dc(t,r),t.match_length<=5&&(t.strategy===hc||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,n=Qo(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=Ic(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Oc(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=Qo(t,0,t.window[t.strstart-1]),n&&Oc(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Qo(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===sc?(Oc(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Oc(t,!1),0===t.strm.avail_out)?1:2};function $c(t,e,r,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=s}var Hc=[new $c(0,0,0,0,Pc),new $c(4,4,8,4,Uc),new $c(4,5,16,8,Uc),new $c(4,6,32,32,Uc),new $c(4,4,16,16,Lc),new $c(8,16,32,32,Lc),new $c(8,16,128,128,Lc),new $c(8,32,128,256,Lc),new $c(32,128,258,1024,Lc),new $c(32,258,258,4096,Lc)];function Vc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_c,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Sc(this.dyn_ltree),Sc(this.dyn_dtree),Sc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Sc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Sc(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var zc=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Ec&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==vc&&e.status!==kc?1:0},jc=t=>{if(zc(t))return Ac(t,cc);t.total_in=t.total_out=0,t.data_type=mc;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?Ec:vc,t.adler=2===e.wrap?0:1,e.last_flush=-2,Wo(e),ic},Mc=t=>{const e=jc(t);var r;return e===ic&&((r=t.state).window_size=2*r.w_size,Sc(r.head),r.max_lazy_match=Hc[r.level].max_lazy,r.good_match=Hc[r.level].good_length,r.nice_match=Hc[r.level].nice_length,r.max_chain_length=Hc[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},qc=(t,e,r,n,s,a)=>{if(!t)return cc;let i=1;if(e===dc&&(e=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),s<1||s>9||r!==_c||n<8||n>15||e<0||e>9||a<0||a>gc||8===n&&1!==i)return Ac(t,cc);8===n&&(n=9);const o=new Vc;return t.state=o,o.strm=t,o.status=Ec,o.wrap=i,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=a,o.method=r,Mc(t)},Zc={deflateInit:(t,e)=>qc(t,e,_c,15,8,yc),deflateInit2:qc,deflateReset:Mc,deflateResetKeep:jc,deflateSetHeader:(t,e)=>zc(t)||2!==t.state.wrap?cc:(t.state.gzhead=e,ic),deflate:(t,e)=>{if(zc(t)||e>ac||e<0)return t?Ac(t,cc):cc;const r=t.state;if(!t.output||0!==t.avail_in&&!t.input||r.status===kc&&e!==sc)return Ac(t,0===t.avail_out?uc:cc);const n=r.last_flush;if(r.last_flush=e,0!==r.pending){if(Tc(t),0===t.avail_out)return r.last_flush=-1,ic}else if(0===t.avail_in&&xc(e)<=xc(n)&&e!==sc)return Ac(t,uc);if(r.status===kc&&0!==t.avail_in)return Ac(t,uc);if(r.status===Ec&&0===r.wrap&&(r.status=vc),r.status===Ec){let e=_c+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=fc||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=n<<6,0!==r.strstart&&(e|=32),e+=31-e%31,Rc(r,e),0!==r.strstart&&(Rc(r,t.adler>>>16),Rc(r,65535&t.adler)),t.adler=1,r.status=vc,Tc(t),0!==r.pending)return r.last_flush=-1,ic}if(57===r.status)if(t.adler=0,Nc(r,31),Nc(r,139),Nc(r,8),r.gzhead)Nc(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Nc(r,255&r.gzhead.time),Nc(r,r.gzhead.time>>8&255),Nc(r,r.gzhead.time>>16&255),Nc(r,r.gzhead.time>>24&255),Nc(r,9===r.level?2:r.strategy>=fc||r.level<2?4:0),Nc(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Nc(r,255&r.gzhead.extra.length),Nc(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Ko(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Nc(r,0),Nc(r,0),Nc(r,0),Nc(r,0),Nc(r,0),Nc(r,9===r.level?2:r.strategy>=fc||r.level<2?4:0),Nc(r,3),r.status=vc,Tc(t),0!==r.pending)return r.last_flush=-1,ic;if(69===r.status){if(r.gzhead.extra){let e=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>e&&(t.adler=Ko(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex+=s,Tc(t),0!==r.pending)return r.last_flush=-1,ic;e=0,n-=s}let s=new Uint8Array(r.gzhead.extra);r.pending_buf.set(s.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>e&&(t.adler=Ko(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=Ko(t.adler,r.pending_buf,r.pending-n,n)),Tc(t),0!==r.pending)return r.last_flush=-1,ic;n=0}e=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Nc(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=Ko(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=Ko(t.adler,r.pending_buf,r.pending-n,n)),Tc(t),0!==r.pending)return r.last_flush=-1,ic;n=0}e=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Nc(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=Ko(t.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Tc(t),0!==r.pending))return r.last_flush=-1,ic;Nc(r,255&t.adler),Nc(r,t.adler>>8&255),t.adler=0}if(r.status=vc,Tc(t),0!==r.pending)return r.last_flush=-1,ic}if(0!==t.avail_in||0!==r.lookahead||e!==ec&&r.status!==kc){let n=0===r.level?Pc(r,e):r.strategy===fc?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(Fc(t),0===t.lookahead)){if(e===ec)return 1;break}if(t.match_length=0,r=Qo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Oc(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===sc?(Oc(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Oc(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===pc?((t,e)=>{let r,n,s,a;const i=t.window;for(;;){if(t.lookahead<=wc){if(Fc(t),t.lookahead<=wc&&e===ec)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,n=i[s],n===i[++s]&&n===i[++s]&&n===i[++s])){a=t.strstart+wc;do{}while(n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&s<a);t.match_length=wc-(a-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=Qo(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Qo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Oc(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===sc?(Oc(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Oc(t,!1),0===t.strm.avail_out)?1:2})(r,e):Hc[r.level].func(r,e);if(3!==n&&4!==n||(r.status=kc),1===n||3===n)return 0===t.avail_out&&(r.last_flush=-1),ic;if(2===n&&(e===rc?tc(r):e!==ac&&(Xo(r,0,0,!1),e===nc&&(Sc(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Tc(t),0===t.avail_out))return r.last_flush=-1,ic}return e!==sc?ic:r.wrap<=0?oc:(2===r.wrap?(Nc(r,255&t.adler),Nc(r,t.adler>>8&255),Nc(r,t.adler>>16&255),Nc(r,t.adler>>24&255),Nc(r,255&t.total_in),Nc(r,t.total_in>>8&255),Nc(r,t.total_in>>16&255),Nc(r,t.total_in>>24&255)):(Rc(r,t.adler>>>16),Rc(r,65535&t.adler)),Tc(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?ic:oc)},deflateEnd:t=>{if(zc(t))return cc;const e=t.state.status;return t.state=null,e===vc?Ac(t,lc):ic},deflateSetDictionary:(t,e)=>{let r=e.length;if(zc(t))return cc;const n=t.state,s=n.wrap;if(2===s||1===s&&n.status!==Ec||n.lookahead)return cc;if(1===s&&(t.adler=qo(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===s&&(Sc(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const a=t.avail_in,i=t.next_in,o=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Fc(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=Ic(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,Fc(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=i,t.input=o,t.avail_in=a,n.wrap=s,ic},deflateInfo:"pako deflate (from Nodeca project)"},Kc=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Gc={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Kc(r,e)&&(t[e]=r[e])}}return t},flattenChunks:t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,s=t.length;e<s;e++){let s=t[e];r.set(s,n),n+=s.length}return r}},Yc=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Yc=!1}var Wc=new Uint8Array(256);for(let t=0;t<256;t++)Wc[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Wc[254]=Wc[254]=1;var Xc={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,r,n,s,a,i=t.length,o=0;for(s=0;s<i;s++)r=t.charCodeAt(s),55296==(64512&r)&&s+1<i&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),a=0,s=0;a<o;s++)r=t.charCodeAt(s),55296==(64512&r)&&s+1<i&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},buf2string:(t,e)=>{const r=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,s;const a=new Array(2*r);for(s=0,n=0;n<r;){let e=t[n++];if(e<128){a[s++]=e;continue}let i=Wc[e];if(i>4)a[s++]=65533,n+=i-1;else{for(e&=2===i?31:3===i?15:7;i>1&&n<r;)e=e<<6|63&t[n++],i--;i>1?a[s++]=65533:e<65536?a[s++]=e:(e-=65536,a[s++]=55296|e>>10&1023,a[s++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Yc)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(a,s)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+Wc[t[r]]>e?r:e}};var Jc=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Qc=Object.prototype.toString,{Z_NO_FLUSH:tl,Z_SYNC_FLUSH:el,Z_FULL_FLUSH:rl,Z_FINISH:nl,Z_OK:sl,Z_STREAM_END:al,Z_DEFAULT_COMPRESSION:il,Z_DEFAULT_STRATEGY:ol,Z_DEFLATED:cl}=Yo;function ll(t){this.options=Gc.assign({level:il,method:cl,chunkSize:16384,windowBits:15,memLevel:8,strategy:ol},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jc,this.strm.avail_out=0;let r=Zc.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==sl)throw new Error(Go[r]);if(e.header&&Zc.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Xc.string2buf(e.dictionary):"[object ArrayBuffer]"===Qc.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=Zc.deflateSetDictionary(this.strm,t),r!==sl)throw new Error(Go[r]);this._dict_set=!0}}function ul(t,e){const r=new ll(e);if(r.push(t,!0),r.err)throw r.msg||Go[r.err];return r.result}ll.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?nl:tl,"string"==typeof t?r.input=Xc.string2buf(t):"[object ArrayBuffer]"===Qc.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===el||a===rl)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(s=Zc.deflate(r,a),s===al)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=Zc.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===sl;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ll.prototype.onData=function(t){this.chunks.push(t)},ll.prototype.onEnd=function(t){t===sl&&(this.result=Gc.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var dl={Deflate:ll,deflate:ul,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ul(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ul(t,e)},constants:Yo},hl=16209,fl=function(t,e){let r,n,s,a,i,o,c,l,u,d,h,f,p,g,y,m,_,w,b,E,v,k,A,x;const S=t.state;r=t.next_in,A=t.input,n=r+(t.avail_in-5),s=t.next_out,x=t.output,a=s-(e-t.avail_out),i=s+(t.avail_out-257),o=S.dmax,c=S.wsize,l=S.whave,u=S.wnext,d=S.window,h=S.hold,f=S.bits,p=S.lencode,g=S.distcode,y=(1<<S.lenbits)-1,m=(1<<S.distbits)-1;t:do{f<15&&(h+=A[r++]<<f,f+=8,h+=A[r++]<<f,f+=8),_=p[h&y];e:for(;;){if(w=_>>>24,h>>>=w,f-=w,w=_>>>16&255,0===w)x[s++]=65535&_;else{if(!(16&w)){if(0==(64&w)){_=p[(65535&_)+(h&(1<<w)-1)];continue e}if(32&w){S.mode=16191;break t}t.msg="invalid literal/length code",S.mode=hl;break t}b=65535&_,w&=15,w&&(f<w&&(h+=A[r++]<<f,f+=8),b+=h&(1<<w)-1,h>>>=w,f-=w),f<15&&(h+=A[r++]<<f,f+=8,h+=A[r++]<<f,f+=8),_=g[h&m];r:for(;;){if(w=_>>>24,h>>>=w,f-=w,w=_>>>16&255,!(16&w)){if(0==(64&w)){_=g[(65535&_)+(h&(1<<w)-1)];continue r}t.msg="invalid distance code",S.mode=hl;break t}if(E=65535&_,w&=15,f<w&&(h+=A[r++]<<f,f+=8,f<w&&(h+=A[r++]<<f,f+=8)),E+=h&(1<<w)-1,E>o){t.msg="invalid distance too far back",S.mode=hl;break t}if(h>>>=w,f-=w,w=s-a,E>w){if(w=E-w,w>l&&S.sane){t.msg="invalid distance too far back",S.mode=hl;break t}if(v=0,k=d,0===u){if(v+=c-w,w<b){b-=w;do{x[s++]=d[v++]}while(--w);v=s-E,k=x}}else if(u<w){if(v+=c+u-w,w-=u,w<b){b-=w;do{x[s++]=d[v++]}while(--w);if(v=0,u<b){w=u,b-=w;do{x[s++]=d[v++]}while(--w);v=s-E,k=x}}}else if(v+=u-w,w<b){b-=w;do{x[s++]=d[v++]}while(--w);v=s-E,k=x}for(;b>2;)x[s++]=k[v++],x[s++]=k[v++],x[s++]=k[v++],b-=3;b&&(x[s++]=k[v++],b>1&&(x[s++]=k[v++]))}else{v=s-E;do{x[s++]=x[v++],x[s++]=x[v++],x[s++]=x[v++],b-=3}while(b>2);b&&(x[s++]=x[v++],b>1&&(x[s++]=x[v++]))}break}}break}}while(r<n&&s<i);b=f>>3,r-=b,f-=b<<3,h&=(1<<f)-1,t.next_in=r,t.next_out=s,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=s<i?i-s+257:257-(s-i),S.hold=h,S.bits=f},pl=15,gl=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),yl=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ml=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_l=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),wl=(t,e,r,n,s,a,i,o)=>{const c=o.bits;let l,u,d,h,f,p,g=0,y=0,m=0,_=0,w=0,b=0,E=0,v=0,k=0,A=0,x=null;const S=new Uint16Array(16),C=new Uint16Array(16);let I,T,O,N=null;for(g=0;g<=pl;g++)S[g]=0;for(y=0;y<n;y++)S[e[r+y]]++;for(w=c,_=pl;_>=1&&0===S[_];_--);if(w>_&&(w=_),0===_)return s[a++]=20971520,s[a++]=20971520,o.bits=1,0;for(m=1;m<_&&0===S[m];m++);for(w<m&&(w=m),v=1,g=1;g<=pl;g++)if(v<<=1,v-=S[g],v<0)return-1;if(v>0&&(0===t||1!==_))return-1;for(C[1]=0,g=1;g<pl;g++)C[g+1]=C[g]+S[g];for(y=0;y<n;y++)0!==e[r+y]&&(i[C[e[r+y]]++]=y);if(0===t?(x=N=i,p=20):1===t?(x=gl,N=yl,p=257):(x=ml,N=_l,p=0),A=0,y=0,g=m,f=a,b=w,E=0,d=-1,k=1<<w,h=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){I=g-E,i[y]+1<p?(T=0,O=i[y]):i[y]>=p?(T=N[i[y]-p],O=x[i[y]-p]):(T=96,O=0),l=1<<g-E,u=1<<b,m=u;do{u-=l,s[f+(A>>E)+u]=I<<24|T<<16|O|0}while(0!==u);for(l=1<<g-1;A&l;)l>>=1;if(0!==l?(A&=l-1,A+=l):A=0,y++,0==--S[g]){if(g===_)break;g=e[r+i[y]]}if(g>w&&(A&h)!==d){for(0===E&&(E=w),f+=m,b=g-E,v=1<<b;b+E<_&&(v-=S[b+E],!(v<=0));)b++,v<<=1;if(k+=1<<b,1===t&&k>852||2===t&&k>592)return 1;d=A&h,s[d]=w<<24|b<<16|f-a|0}}return 0!==A&&(s[f+A]=g-E<<24|64<<16|0),o.bits=w,0},{Z_FINISH:bl,Z_BLOCK:El,Z_TREES:vl,Z_OK:kl,Z_STREAM_END:Al,Z_NEED_DICT:xl,Z_STREAM_ERROR:Sl,Z_DATA_ERROR:Cl,Z_MEM_ERROR:Il,Z_BUF_ERROR:Tl,Z_DEFLATED:Ol}=Yo,Nl=16180,Rl=16190,Bl=16191,Dl=16192,Fl=16194,Pl=16199,Ul=16200,Ll=16206,$l=16209,Hl=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Vl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var zl,jl,Ml=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Nl||e.mode>16211?1:0},ql=t=>{if(Ml(t))return Sl;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Nl,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,kl},Zl=t=>{if(Ml(t))return Sl;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ql(t)},Kl=(t,e)=>{let r;if(Ml(t))return Sl;const n=t.state;return e<0?(r=0,e=-e):(r=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Sl:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Zl(t))},Gl=(t,e)=>{if(!t)return Sl;const r=new Vl;t.state=r,r.strm=t,r.window=null,r.mode=Nl;const n=Kl(t,e);return n!==kl&&(t.state=null),n},Yl=!0,Wl=t=>{if(Yl){zl=new Int32Array(512),jl=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(wl(1,t.lens,0,288,zl,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;wl(2,t.lens,0,32,jl,0,t.work,{bits:5}),Yl=!1}t.lencode=zl,t.lenbits=9,t.distcode=jl,t.distbits=5},Xl=(t,e,r,n)=>{let s;const a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(e.subarray(r-n,r-n+s),a.wnext),(n-=s)?(a.window.set(e.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},Jl={inflateReset:Zl,inflateReset2:Kl,inflateResetKeep:ql,inflateInit:t=>Gl(t,15),inflateInit2:Gl,inflate:(t,e)=>{let r,n,s,a,i,o,c,l,u,d,h,f,p,g,y,m,_,w,b,E,v,k,A=0;const x=new Uint8Array(4);let S,C;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ml(t)||!t.output||!t.input&&0!==t.avail_in)return Sl;r=t.state,r.mode===Bl&&(r.mode=Dl),i=t.next_out,s=t.output,c=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,l=r.hold,u=r.bits,d=o,h=c,k=kl;t:for(;;)switch(r.mode){case Nl:if(0===r.wrap){r.mode=Dl;break}for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(2&r.wrap&&35615===l){0===r.wbits&&(r.wbits=15),r.check=0,x[0]=255&l,x[1]=l>>>8&255,r.check=Ko(r.check,x,2,0),l=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",r.mode=$l;break}if((15&l)!==Ol){t.msg="unknown compression method",r.mode=$l;break}if(l>>>=4,u-=4,v=8+(15&l),0===r.wbits&&(r.wbits=v),v>15||v>r.wbits){t.msg="invalid window size",r.mode=$l;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=512&l?16189:Bl,l=0,u=0;break;case 16181:for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==Ol){t.msg="unknown compression method",r.mode=$l;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=$l;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&4&r.wrap&&(x[0]=255&l,x[1]=l>>>8&255,r.check=Ko(r.check,x,2,0)),l=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&4&r.wrap&&(x[0]=255&l,x[1]=l>>>8&255,x[2]=l>>>16&255,x[3]=l>>>24&255,r.check=Ko(r.check,x,4,0)),l=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&4&r.wrap&&(x[0]=255&l,x[1]=l>>>8&255,r.check=Ko(r.check,x,2,0)),l=0,u=0,r.mode=16184;case 16184:if(1024&r.flags){for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&4&r.wrap&&(x[0]=255&l,x[1]=l>>>8&255,r.check=Ko(r.check,x,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>o&&(f=o),f&&(r.head&&(v=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+f),v)),512&r.flags&&4&r.wrap&&(r.check=Ko(r.check,n,f,a)),o-=f,a+=f,r.length-=f),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===o)break t;f=0;do{v=n[a+f++],r.head&&v&&r.length<65536&&(r.head.name+=String.fromCharCode(v))}while(v&&f<o);if(512&r.flags&&4&r.wrap&&(r.check=Ko(r.check,n,f,a)),o-=f,a+=f,v)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===o)break t;f=0;do{v=n[a+f++],r.head&&v&&r.length<65536&&(r.head.comment+=String.fromCharCode(v))}while(v&&f<o);if(512&r.flags&&4&r.wrap&&(r.check=Ko(r.check,n,f,a)),o-=f,a+=f,v)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(4&r.wrap&&l!==(65535&r.check)){t.msg="header crc mismatch",r.mode=$l;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Bl;break;case 16189:for(;u<32;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}t.adler=r.check=Hl(l),l=0,u=0,r.mode=Rl;case Rl:if(0===r.havedict)return t.next_out=i,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=l,r.bits=u,xl;t.adler=r.check=1,r.mode=Bl;case Bl:if(e===El||e===vl)break t;case Dl:if(r.last){l>>>=7&u,u-=7&u,r.mode=Ll;break}for(;u<3;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=16193;break;case 1:if(Wl(r),r.mode=Pl,e===vl){l>>>=2,u-=2;break t}break;case 2:r.mode=16196;break;case 3:t.msg="invalid block type",r.mode=$l}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",r.mode=$l;break}if(r.length=65535&l,l=0,u=0,r.mode=Fl,e===vl)break t;case Fl:r.mode=16195;case 16195:if(f=r.length,f){if(f>o&&(f=o),f>c&&(f=c),0===f)break t;s.set(n.subarray(a,a+f),i),o-=f,a+=f,c-=f,i+=f,r.length-=f;break}r.mode=Bl;break;case 16196:for(;u<14;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=$l;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.lens[I[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},k=wl(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,k){t.msg="invalid code lengths set",r.mode=$l;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;A=r.lencode[l&(1<<r.lenbits)-1],y=A>>>24,m=A>>>16&255,_=65535&A,!(y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(_<16)l>>>=y,u-=y,r.lens[r.have++]=_;else{if(16===_){for(C=y+2;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(l>>>=y,u-=y,0===r.have){t.msg="invalid bit length repeat",r.mode=$l;break}v=r.lens[r.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===_){for(C=y+3;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}l>>>=y,u-=y,v=0,f=3+(7&l),l>>>=3,u-=3}else{for(C=y+7;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}l>>>=y,u-=y,v=0,f=11+(127&l),l>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=$l;break}for(;f--;)r.lens[r.have++]=v}}if(r.mode===$l)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=$l;break}if(r.lenbits=9,S={bits:r.lenbits},k=wl(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,k){t.msg="invalid literal/lengths set",r.mode=$l;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},k=wl(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,k){t.msg="invalid distances set",r.mode=$l;break}if(r.mode=Pl,e===vl)break t;case Pl:r.mode=Ul;case Ul:if(o>=6&&c>=258){t.next_out=i,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=l,r.bits=u,fl(t,h),i=t.next_out,s=t.output,c=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,l=r.hold,u=r.bits,r.mode===Bl&&(r.back=-1);break}for(r.back=0;A=r.lencode[l&(1<<r.lenbits)-1],y=A>>>24,m=A>>>16&255,_=65535&A,!(y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(m&&0==(240&m)){for(w=y,b=m,E=_;A=r.lencode[E+((l&(1<<w+b)-1)>>w)],y=A>>>24,m=A>>>16&255,_=65535&A,!(w+y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,r.back+=w}if(l>>>=y,u-=y,r.back+=y,r.length=_,0===m){r.mode=16205;break}if(32&m){r.back=-1,r.mode=Bl;break}if(64&m){t.msg="invalid literal/length code",r.mode=$l;break}r.extra=15&m,r.mode=16201;case 16201:if(r.extra){for(C=r.extra;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;A=r.distcode[l&(1<<r.distbits)-1],y=A>>>24,m=A>>>16&255,_=65535&A,!(y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(0==(240&m)){for(w=y,b=m,E=_;A=r.distcode[E+((l&(1<<w+b)-1)>>w)],y=A>>>24,m=A>>>16&255,_=65535&A,!(w+y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,r.back+=w}if(l>>>=y,u-=y,r.back+=y,64&m){t.msg="invalid distance code",r.mode=$l;break}r.offset=_,r.extra=15&m,r.mode=16203;case 16203:if(r.extra){for(C=r.extra;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=$l;break}r.mode=16204;case 16204:if(0===c)break t;if(f=h-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=$l;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=s,p=i-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do{s[i++]=g[p++]}while(--f);0===r.length&&(r.mode=Ul);break;case 16205:if(0===c)break t;s[i++]=r.length,c--,r.mode=Ul;break;case Ll:if(r.wrap){for(;u<32;){if(0===o)break t;o--,l|=n[a++]<<u,u+=8}if(h-=c,t.total_out+=h,r.total+=h,4&r.wrap&&h&&(t.adler=r.check=r.flags?Ko(r.check,s,h,i-h):qo(r.check,s,h,i-h)),h=c,4&r.wrap&&(r.flags?l:Hl(l))!==r.check){t.msg="incorrect data check",r.mode=$l;break}l=0,u=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;u<32;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(4&r.wrap&&l!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=$l;break}l=0,u=0}r.mode=16208;case 16208:k=Al;break t;case $l:k=Cl;break t;case 16210:return Il;default:return Sl}return t.next_out=i,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=l,r.bits=u,(r.wsize||h!==t.avail_out&&r.mode<$l&&(r.mode<Ll||e!==bl))&&Xl(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,4&r.wrap&&h&&(t.adler=r.check=r.flags?Ko(r.check,s,h,t.next_out-h):qo(r.check,s,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Bl?128:0)+(r.mode===Pl||r.mode===Fl?256:0),(0===d&&0===h||e===bl)&&k===kl&&(k=Tl),k},inflateEnd:t=>{if(Ml(t))return Sl;let e=t.state;return e.window&&(e.window=null),t.state=null,kl},inflateGetHeader:(t,e)=>{if(Ml(t))return Sl;const r=t.state;return 0==(2&r.wrap)?Sl:(r.head=e,e.done=!1,kl)},inflateSetDictionary:(t,e)=>{const r=e.length;let n,s,a;return Ml(t)?Sl:(n=t.state,0!==n.wrap&&n.mode!==Rl?Sl:n.mode===Rl&&(s=1,s=qo(s,e,r,0),s!==n.check)?Cl:(a=Xl(t,e,r,r),a?(n.mode=16210,Il):(n.havedict=1,kl)))},inflateInfo:"pako inflate (from Nodeca project)"};var Ql=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},tu=Object.prototype.toString,{Z_NO_FLUSH:eu,Z_FINISH:ru,Z_OK:nu,Z_STREAM_END:su,Z_NEED_DICT:au,Z_STREAM_ERROR:iu,Z_DATA_ERROR:ou,Z_MEM_ERROR:cu}=Yo;function lu(t){this.options=Gc.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jc,this.strm.avail_out=0;let r=Jl.inflateInit2(this.strm,e.windowBits);if(r!==nu)throw new Error(Go[r]);if(this.header=new Ql,Jl.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Xc.string2buf(e.dictionary):"[object ArrayBuffer]"===tu.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Jl.inflateSetDictionary(this.strm,e.dictionary),r!==nu)))throw new Error(Go[r])}function uu(t,e){const r=new lu(e);if(r.push(t),r.err)throw r.msg||Go[r.err];return r.result}lu.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let a,i,o;if(this.ended)return!1;for(i=e===~~e?e:!0===e?ru:eu,"[object ArrayBuffer]"===tu.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Jl.inflate(r,i),a===au&&s&&(a=Jl.inflateSetDictionary(r,s),a===nu?a=Jl.inflate(r,i):a===ou&&(a=au));r.avail_in>0&&a===su&&r.state.wrap>0&&0!==t[r.next_in];)Jl.inflateReset(r),a=Jl.inflate(r,i);switch(a){case iu:case ou:case au:case cu:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(0===r.avail_out||a===su))if("string"===this.options.to){let t=Xc.utf8border(r.output,r.next_out),e=r.next_out-t,s=Xc.buf2string(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(s)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==nu||0!==o){if(a===su)return a=Jl.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},lu.prototype.onData=function(t){this.chunks.push(t)},lu.prototype.onEnd=function(t){t===nu&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Gc.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var du={Inflate:lu,inflate:uu,inflateRaw:function(t,e){return(e=e||{}).raw=!0,uu(t,e)},ungzip:uu,constants:Yo},{Deflate:hu,deflate:fu,deflateRaw:pu,gzip:gu}=dl,{Inflate:yu,inflate:mu,inflateRaw:_u,ungzip:wu}=du,bu=gu,Eu=wu;function vu(t){const e="string"==typeof t?t:Ui(t);return et(bu(e))}function ku(t){if(Array.isArray(t))return t;const e=X(Eu(tt(t)));return Fi(e)}function Au(){return zn(Ln.randomPrivateKey())}function xu(t){return st(t).toLowerCase()}function Su(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map((t=>Ne(t)));try{const{r:e,s:r}=t;return[Ne(e),Ne(r)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Cu(t){return Ue(Su(t))}function Iu(t){return Le(Su(t))}function Tu(t,e=.5){const r=Math.round(100*(1+e));return Te(t)*Te(r)/100n}function Ou(t){return"sierra_program"in("string"==typeof t?Fi(t):t)}function Nu(t){const e={...t};if(Ou(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=ro(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??ao(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}function Ru(t){if(Ou(t))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const e=t;return{...e,program:ku(e.program)}}var Bu=y(B()),Du="undefined"!=typeof window&&window.fetch||"undefined"!=typeof global&&global.fetch||Bu.default,Fu={};function Pu(t){return new Promise((e=>{setTimeout(e,t)}))}function Uu(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=Ji(Ui(t.abi)),e.sierra_program=Ji(Ui(t.sierra_program)),e.sierra_program=vu(e.sierra_program),e}function Lu(t){const e="string"==typeof t?Fi(t):t;return Ou(t)?Uu(e):{...e,..."program"in e&&{program:vu(e.program)}}}p(Fu,{createSierraContractClass:()=>Uu,parseContract:()=>Lu,wait:()=>Pu});function $u(t,e=t.constructor){const{captureStackTrace:r}=Error;r&&r(t,e)}function Hu(t,e){const{setPrototypeOf:r}=Object;r?r(t,e):t.__proto__=e}var Vu=class extends Error{constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),Hu(this,new.target.prototype),$u(this)}},zu=class extends Vu{},ju=class extends zu{constructor(t,e){super(t),this.errorCode=e}},Mu=class extends zu{constructor(t,e){super(t),this.errorCode=e}},qu={};p(qu,{StarknetIdContract:()=>ed,getStarknetIdContract:()=>rd,useDecoded:()=>Qu,useEncoded:()=>td});var Zu="abcdefghijklmnopqrstuvwxyz0123456789-",Ku=BigInt(Zu.length+1),Gu="这来",Yu=BigInt(Zu.length),Wu=BigInt(Gu.length),Xu=BigInt(Gu.length+1);function Ju(t){let e=0;for(;t.endsWith(Gu[Gu.length-1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function Qu(t){let e="";return t.forEach((t=>{for(;t!==mt;){const r=t%Ku;if(t/=Ku,r===BigInt(Zu.length)){const r=t/Xu;if(r===mt){const n=t%Xu;t=r,e+=n===mt?Zu[0]:Gu[Number(n)-1]}else{e+=Gu[Number(t%Wu)],t/=Wu}}else e+=Zu[Number(r)]}const[r,n]=Ju(e);n&&(e=r+(n%2==0?Gu[Gu.length-1].repeat(n/2-1)+Gu[0]+Zu[1]:Gu[Gu.length-1].repeat((n-1)/2+1))),e+="."})),e?e.concat("stark"):e}function td(t){let e=BigInt(0),r=BigInt(1);if(t.endsWith(Gu[0]+Zu[1])){const[e,r]=Ju(t.substring(0,t.length-2));t=e+Gu[Gu.length-1].repeat(2*(r+1))}else{const[e,r]=Ju(t);r&&(t=e+Gu[Gu.length-1].repeat(1+2*(r-1)))}for(let n=0;n<t.length;n+=1){const s=t[n],a=Zu.indexOf(s),i=BigInt(Zu.indexOf(s));if(-1!==a)n===t.length-1&&t[n]===Zu[0]?(e+=r*Yu,r*=Ku,r*=Ku):(e+=r*i,r*=Ku);else if(-1!==Gu.indexOf(s)){e+=r*Yu,r*=Ku;const a=(n===t.length-1?1:0)+Gu.indexOf(s);e+=r*BigInt(a),r*=Wu}}return e}var ed=(t=>(t.MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",t.TESTNET="0x3bab268e932d2cecd1946f100ae67ce3dff9fd234119ea2f6da57d16d29fce",t))(ed||{});function rd(t){switch(t){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f474f45524c49":return"0x3bab268e932d2cecd1946f100ae67ce3dff9fd234119ea2f6da57d16d29fce";default:throw new Error("Starknet.id is not yet deployed on this network")}}async function nd(t,e,r){const n=await t.getChainId(),s=r??rd(n);try{const r=await t.callContract({contractAddress:s,entrypoint:"address_to_domain",calldata:Oa.compile({address:e})}),n=Qu(r.result.map((t=>BigInt(t))).slice(1));if(!n)throw Error("Starkname not found");return n}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}async function sd(t,e,r){const n=await t.getChainId(),s=r??rd(n);try{return(await t.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:Oa.compile({domain:[td(e.replace(".stark","")).toString(10)]})})).result[0]}catch{throw Error("Could not get address from stark name")}}var ad=Object.values($t),id=class{constructor(t){this.hash=null,this.number=null,this.tag=null,this.valueOf=()=>this.number,this.toString=()=>this.hash,this.setIdentifier(t)}setIdentifier(t){"string"==typeof t&&Ie(t)?this.hash=t:"bigint"==typeof t?this.hash=Ne(t):"number"==typeof t?this.number=t:"string"==typeof t&&ad.includes(t)?this.tag=t:this.tag="pending"}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}get sequencerIdentifier(){return null!==this.hash?{blockHash:this.hash}:{blockNumber:this.number??this.tag}}},od=(t,e=!1)=>{e||console.warn("Using default public node url, please provide nodeUrl in provider options!");const r="SN_MAIN"===t?Ct:St;return r[Math.floor(Math.random()*r.length)]},cd={"Content-Type":"application/json"},ld="pending",ud=200,dd=class{constructor(t){this.responseParser=new class{parseGetBlockResponse(t){return{timestamp:t.timestamp,block_hash:"block_hash"in t?t.block_hash:"",block_number:"block_number"in t?t.block_number:-1,new_root:"new_root"in t?t.new_root:"",parent_hash:t.parent_hash,status:"status"in t?t.status:"PENDING",transactions:t.transactions}}parseGetTransactionResponse(t){return{calldata:"calldata"in t?t.calldata:[],contract_address:"contract_address"in t?t.contract_address:"",sender_address:"sender_address"in t?t.sender_address:"",max_fee:"max_fee"in t?t.max_fee:"",nonce:"nonce"in t?t.nonce:"",signature:"signature"in t?t.signature:[],transaction_hash:t.transaction_hash,version:t.version}}parseFeeEstimateResponse(t){return{overall_fee:Te(t[0].overall_fee),gas_consumed:Te(t[0].gas_consumed),gas_price:Te(t[0].gas_price)}}parseFeeEstimateBulkResponse(t){return t.map((t=>({overall_fee:Te(t.overall_fee),gas_consumed:Te(t.gas_consumed),gas_price:Te(t.gas_price)})))}parseCallContractResponse(t){return{result:t}}parseSimulateTransactionResponse(t){return t.map((t=>({...t,suggestedMaxFee:Tu(BigInt(t.fee_estimation.overall_fee))})))}parseContractClassResponse(t){return{...t,abi:"string"==typeof t.abi?JSON.parse(t.abi):t.abi}}},this.getBlockHashAndNumber=this.getBlockLatestAccepted,this.getStateUpdate=this.getBlockStateUpdate,this.traceBlockTransactions=this.getBlockTransactionsTraces,this.getTransactionCount=this.getBlockTransactionCount,this.traceTransaction=this.getTransactionTrace,this.getSimulateTransaction=this.simulateTransaction;const{nodeUrl:e,retries:r,headers:n,blockIdentifier:s,chainId:a}=t||{};Object.values(vt).includes(e)?this.nodeUrl=od(e,t?.default):this.nodeUrl=e||od(void 0,t?.default),this.retries=r||ud,this.headers={...cd,...n},this.blockIdentifier=s||ld,this.chainId=a}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return Du(this.nodeUrl,{method:"POST",body:Ui(n),headers:this.headers})}errorHandler(t,e,r,n){if(r){const{code:n,message:s,data:a}=r;throw new zu(`RPC: ${t} with params ${Ui(e)}\n ${n}: ${s}: ${Ui(a)}`)}if(n instanceof zu)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{const r=await this.fetch(t,e),{error:n,result:s}=await r.json();return this.errorHandler(t,e,n),s}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async getNonceForAddress(t,e=this.blockIdentifier){const r=Ne(t),n=new id(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}async getBlock(t=this.blockIdentifier){return this.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}async getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}async getBlockWithTxHashes(t=this.blockIdentifier){const e=new id(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}async getBlockWithTxs(t=this.blockIdentifier){const e=new id(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}async getBlockStateUpdate(t=this.blockIdentifier){const e=new id(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}async getBlockTransactionsTraces(t=this.blockIdentifier){const e=new id(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}async getBlockTransactionCount(t=this.blockIdentifier){const e=new id(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}async getPendingTransactions(){const{transactions:t}=await this.getBlock("pending");return Promise.all(t.map((t=>this.getTransactionByHash(t))))}async getTransaction(t){return this.getTransactionByHash(t).then(this.responseParser.parseGetTransactionResponse)}async getTransactionByHash(t){const e=Ne(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}async getTransactionByBlockIdAndIndex(t,e){const r=new id(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:e})}async getTransactionReceipt(t){const e=Ne(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}async getTransactionTrace(t){const e=Ne(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}async getTransactionStatus(t){const e=Ne(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}async simulateTransaction(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!1,skipFeeCharge:n=!0}){const s=new id(e).identifier,a=[];return r&&a.push(Ht.ESimulationFlag.SKIP_VALIDATE),n&&a.push(Ht.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map((t=>this.buildTransaction(t))),simulation_flags:a}).then(this.responseParser.parseSimulateTransactionResponse)}async waitForTransaction(t,e){const r=Ne(t);let{retries:n}=this,s=!1,a=!1;const i=e?.retryInterval??5e3,o=e?.errorStates??[Ht.ETransactionStatus.REJECTED,Ht.ETransactionExecutionStatus.REVERTED],c=e?.successStates??[Ht.ETransactionExecutionStatus.SUCCEEDED,Ht.ETransactionStatus.ACCEPTED_ON_L2,Ht.ETransactionStatus.ACCEPTED_ON_L1];let l;for(;!s;){await Pu(i);try{l=await this.getTransactionStatus(r);const t=l.execution_status,e=l.finality_status;if(!e){throw new Error("waiting for transaction status")}if(c.includes(t)||c.includes(e))s=!0;else if(o.includes(t)||o.includes(e)){const r=`${t}: ${e}`,n=new Error(r);throw n.response=l,a=!0,n}}catch(t){if(t instanceof Error&&a)throw t;if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(r)}catch(t){if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1,await Pu(i)}return u}async getStorageAt(t,e,r=this.blockIdentifier){const n=Ne(t),s=Be(e),a=new id(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:s,block_id:a})}async getClassHashAt(t,e=this.blockIdentifier){const r=Ne(t),n=new id(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}async getClassByHash(t){return this.getClass(t)}async getClass(t,e=this.blockIdentifier){const r=Ne(t),n=new id(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n}).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e=this.blockIdentifier){const r=Ne(t),n=new id(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r}).then(this.responseParser.parseContractClassResponse)}async getCode(t,e){throw new Error("RPC does not implement getCode function")}async getContractVersion(t,e,{blockIdentifier:r=this.blockIdentifier,compiler:n=!0}={}){let s;if(t)s=await this.getClassAt(t,r);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");s=await this.getClass(e,r)}if(Ou(s)){if(n){return{cairo:"1",compiler:Qs(s.abi).compiler}}return{cairo:"1",compiler:void 0}}return{cairo:"0",compiler:"0"}}async getEstimateFee(t,e,r=this.blockIdentifier){return this.getInvokeEstimateFee(t,e,r)}async getInvokeEstimateFee(t,e,r=this.blockIdentifier){const n=new id(r).identifier,s=this.buildTransaction({type:"INVOKE_FUNCTION",...t,...e},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getDeclareEstimateFee(t,e,r=this.blockIdentifier){const n=new id(r).identifier,s=this.buildTransaction({type:"DECLARE",...t,...e},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getDeployAccountEstimateFee(t,e,r=this.blockIdentifier){const n=new id(r).identifier,s=this.buildTransaction({type:"DEPLOY_ACCOUNT",...t,...e},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getEstimateFeeBulk(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!1}){r&&console.warn("getEstimateFeeBulk RPC does not support skipValidate");const n=new id(e).identifier;return this.fetchEndpoint("starknet_estimateFee",{request:t.map((t=>this.buildTransaction(t,"fee"))),block_id:n}).then(this.responseParser.parseFeeEstimateBulkResponse)}async invokeFunction(t,e){return this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:t.contractAddress,calldata:Oa.toHex(t.calldata),type:Ht.ETransactionType.INVOKE,max_fee:Ne(e.maxFee||0),version:"0x1",signature:Iu(t.signature),nonce:Ne(e.nonce)}})}async declareContract({contract:t,signature:e,senderAddress:r,compiledClassHash:n},s){return Ou(t)?this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Ht.ETransactionType.DECLARE,contract_class:{sierra_program:ku(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},compiled_class_hash:n||"",version:ht,max_fee:Ne(s.maxFee||0),signature:Iu(e),sender_address:r,nonce:Ne(s.nonce)}}):this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Ht.ETransactionType.DECLARE,contract_class:{program:t.program,entry_points_by_type:t.entry_points_by_type,abi:t.abi},version:dt,max_fee:Ne(s.maxFee||0),signature:Iu(e),sender_address:r,nonce:Ne(s.nonce)}})}async deployAccountContract({classHash:t,constructorCalldata:e,addressSalt:r,signature:n},s){return this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:Oa.toHex(e||[]),class_hash:Ne(t),contract_address_salt:Ne(r||0),type:Ht.ETransactionType.DEPLOY_ACCOUNT,max_fee:Ne(s.maxFee||0),version:Ne(s.version||0),signature:Iu(n),nonce:Ne(s.nonce)}})}async callContract(t,e=this.blockIdentifier){const r=new id(e).identifier,n=await this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:ys(t.entrypoint),calldata:Oa.toHex(t.calldata)},block_id:r});return this.responseParser.parseCallContractResponse(n)}async estimateMessageFee(t,e=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:s,payload:a}=t,i={from_address:Ne(r),to_address:Ne(n),entry_point_selector:ms(s),payload:ze(a)},o=new id(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:i,block_id:o})}async getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}async getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}async getStarkName(t,e){return nd(this,t,e)}async getAddressFromStarkName(t,e){return sd(this,t,e)}buildTransaction(t,e){const r=ji(e),n={signature:Iu(t.signature),nonce:Ne(t.nonce),max_fee:Ne(t.maxFee||0)};if("INVOKE_FUNCTION"===t.type)return{type:Ht.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:Oa.toHex(t.calldata),version:Ne(t.version||r.v1),...n};if("DECLARE"===t.type)return Ou(t.contract)?{type:t.type,contract_class:{...t.contract,sierra_program:ku(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Ne(t.version||r.v2),...n}:{type:t.type,contract_class:t.contract,sender_address:t.senderAddress,version:Ne(t.version||r.v1),...n};if("DEPLOY_ACCOUNT"===t.type)return{type:t.type,constructor_calldata:Oa.toHex(t.constructorCalldata||[]),class_hash:Ne(t.classHash),contract_address_salt:Ne(t.addressSalt||0),version:Ne(t.version||r.v1),...n};throw Error("RPC buildTransaction received unknown TransactionType")}},hd=y(D()),fd=class{},pd=class extends fd{parseGetBlockResponse(t){return{...t,new_root:t.state_root,parent_hash:t.parent_block_hash,transactions:Object.values(t.transactions).map((t=>"transaction_hash"in t&&t.transaction_hash)).filter(Boolean)}}parseGetTransactionResponse(t){if("NOT_RECEIVED"===t.status&&"NOT_RECEIVED"===t.finality_status)throw new zu;return{...t,calldata:"calldata"in t.transaction?t.transaction.calldata:[],contract_class:"contract_class"in t.transaction?t.transaction.contract_class:void 0,entry_point_selector:"entry_point_selector"in t.transaction?t.transaction.entry_point_selector:void 0,max_fee:"max_fee"in t.transaction?t.transaction.max_fee:void 0,nonce:t.transaction.nonce,sender_address:"sender_address"in t.transaction?t.transaction.sender_address:void 0,signature:"signature"in t.transaction?t.transaction.signature:void 0,transaction_hash:"transaction_hash"in t.transaction?t.transaction.transaction_hash:void 0,version:"version"in t.transaction?t.transaction.version:void 0}}parseGetTransactionReceiptResponse(t){return{...t,messages_sent:t.l2_to_l1_messages,..."revert_error"in t&&{revert_reason:t.revert_error}}}parseFeeEstimateResponse(t){if("overall_fee"in t){let e={};try{e={gas_consumed:Te(t.gas_usage),gas_price:Te(t.gas_price)}}catch{}return{overall_fee:Te(t.overall_fee),...e}}return{overall_fee:Te(t.amount)}}parseFeeEstimateBulkResponse(t){return[].concat(t).map((t=>{if("overall_fee"in t){let e={};try{e={gas_consumed:Te(t.gas_usage),gas_price:Te(t.gas_price)}}catch{}return{overall_fee:Te(t.overall_fee),...e}}return{overall_fee:Te(t.amount)}}))}parseSimulateTransactionResponse(t){const e="overall_fee"in t.fee_estimation?t.fee_estimation.overall_fee:t.fee_estimation.amount;return[{transaction_trace:t.trace,fee_estimation:t.fee_estimation,suggestedMaxFee:Tu(BigInt(e))}]}parseCallContractResponse(t){return{result:t.result}}parseInvokeFunctionResponse(t){return{transaction_hash:t.transaction_hash}}parseDeployContractResponse(t){return{transaction_hash:t.transaction_hash,contract_address:t.address}}parseDeclareContractResponse(t){return{transaction_hash:t.transaction_hash,class_hash:t.class_hash}}parseGetStateUpdateResponse(t){const e=Object.entries(t.state_diff.nonces).map((([t,e])=>({contract_address:t,nonce:e}))),r=Object.entries(t.state_diff.storage_diffs).map((([t,e])=>({address:t,storage_entries:e})));return{...t,state_diff:{...t.state_diff,storage_diffs:r,nonces:e}}}parseContractClassResponse(t){const e=Ou(t)?t:Lu(t);return{...e,abi:"string"==typeof e.abi?JSON.parse(e.abi):e.abi}}},gd=y(D()),yd=/^(?:\w+:)?\/\/(\S+)$/,md=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,_d=/^[^\s.]+\.\S{2,}$/;function wd(t){if(!t)return!1;if("string"!=typeof t)return!1;const e=t.match(yd);if(!e)return!1;const r=e[1];return!!r&&!(!md.test(r)&&!_d.test(r))}function bd(t,e,r){return wd(r)?r:(0,gd.default)(t,r??e)}var Ed={network:"SN_GOERLI",blockIdentifier:"pending"},vd=class{constructor(t=Ed){this.responseParser=new pd,"network"in t?(this.baseUrl=vd.getNetworkFromName(t.network),this.feederGatewayUrl=bd(this.baseUrl,"feeder_gateway"),this.gatewayUrl=bd(this.baseUrl,"gateway")):(this.baseUrl=t.baseUrl,this.feederGatewayUrl=bd(this.baseUrl,"feeder_gateway",t.feederGatewayUrl),this.gatewayUrl=bd(this.baseUrl,"gateway",t.gatewayUrl)),this.chainId=t?.chainId??vd.getChainIdFromBaseUrl(this.baseUrl),this.headers=t.headers,this.blockIdentifier=t?.blockIdentifier||Ed.blockIdentifier}static getNetworkFromName(t){switch(t){case"SN_MAIN":case"0x534e5f4d41494e":return"https://alpha-mainnet.starknet.io";case"SN_GOERLI":case"0x534e5f474f45524c49":return"https://alpha4.starknet.io";default:throw new Error("Could not detect base url from NetworkName")}}static getChainIdFromBaseUrl(t){try{return new URL(t).host.includes("mainnet.starknet.io")?"0x534e5f4d41494e":"0x534e5f474f45524c49"}catch{return console.error(`Could not parse baseUrl: ${t}`),"0x534e5f474f45524c49"}}getFetchUrl(t){return["add_transaction"].includes(t)?this.gatewayUrl:this.feederGatewayUrl}getFetchMethod(t){return["add_transaction","call_contract","estimate_fee","estimate_message_fee","estimate_fee_bulk","simulate_transaction"].includes(t)?"POST":"GET"}getQueryString(t){if(void 0===(e=t)||0===Object.keys(e).length||1===Object.keys(e).length&&Object.entries(e).every((([t,e])=>"blockIdentifier"===t&&null===e)))return"";var e;return`?${Object.entries(t).map((([t,e])=>{if("blockIdentifier"===t){return`${new id(e).queryIdentifier}`}return`${t}=${e}`})).join("&")}`}getHeaders(t){return"POST"===t?{"Content-Type":"application/json",...this.headers}:this.headers}async fetchEndpoint(t,...[e,r]){const n=this.getFetchUrl(t),s=this.getFetchMethod(t),a=this.getQueryString(e),i=(0,hd.default)(n,t,a);return this.fetch(i,{method:s,body:r})}async fetch(t,e){const r=bd(this.baseUrl,"",t),n=e?.method??"GET",s=this.getHeaders(n),a=Ui(e?.body);try{const t=await Du(r,{method:n,body:a,headers:s}),i=await t.text();if(!t.ok){let e;try{e=Fi(i)}catch{throw new Mu(t.statusText,t.status)}throw new ju(e.message,e.code)}return(e?.parseAlwaysAsBigInt?Pi:Fi)(i)}catch(t){if(t instanceof Error&&!(t instanceof zu))throw Error(`Could not ${n} from endpoint \`${r}\`: ${t.message}`);throw t}}async getChainId(){return Promise.resolve(this.chainId)}async callContract({contractAddress:t,entrypoint:e,calldata:r=[]},n=this.blockIdentifier){return this.fetchEndpoint("call_contract",{blockIdentifier:n},{contract_address:t,entry_point_selector:ys(e),calldata:Oa.compile(r)}).then(this.responseParser.parseCallContractResponse)}async getBlock(t=this.blockIdentifier){return this.fetchEndpoint("get_block",{blockIdentifier:t}).then(this.responseParser.parseGetBlockResponse)}async getNonceForAddress(t,e=this.blockIdentifier){return this.fetchEndpoint("get_nonce",{contractAddress:t,blockIdentifier:e})}async getStorageAt(t,e,r=this.blockIdentifier){const n=Te(e).toString(10);return this.fetchEndpoint("get_storage_at",{blockIdentifier:r,contractAddress:t,key:n})}async getTransaction(t){const e=Ne(t);return this.fetchEndpoint("get_transaction",{transactionHash:e}).then((t=>{if(1===Object.values(t).length)throw new zu(t.status);return this.responseParser.parseGetTransactionResponse(t)}))}async getTransactionReceipt(t){const e=Ne(t);return this.fetchEndpoint("get_transaction_receipt",{transactionHash:e}).then(this.responseParser.parseGetTransactionReceiptResponse)}async getClassAt(t,e=this.blockIdentifier){return this.fetchEndpoint("get_full_contract",{blockIdentifier:e,contractAddress:t}).then(this.responseParser.parseContractClassResponse)}async getClassHashAt(t,e=this.blockIdentifier){return this.fetchEndpoint("get_class_hash_at",{blockIdentifier:e,contractAddress:t})}async getClassByHash(t,e=this.blockIdentifier){return this.fetchEndpoint("get_class_by_hash",{classHash:t,blockIdentifier:e}).then(this.responseParser.parseContractClassResponse)}async getCompiledClassByClassHash(t,e=this.blockIdentifier){return this.fetchEndpoint("get_compiled_class_by_class_hash",{classHash:t,blockIdentifier:e})}async getContractVersion(t,e,{blockIdentifier:r=this.blockIdentifier,compiler:n=!0}={}){let s;if(t)s=await this.getClassAt(t,r);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");s=await this.getClassByHash(e,r)}if(Ou(s)){if(n){return{cairo:"1",compiler:Qs(s.abi).compiler}}return{cairo:"1",compiler:void 0}}return{cairo:"0",compiler:"0"}}async invokeFunction(t,e){return this.fetchEndpoint("add_transaction",void 0,{type:"INVOKE_FUNCTION",sender_address:t.contractAddress,calldata:Oa.compile(t.calldata??[]),signature:Cu(t.signature),nonce:Ne(e.nonce),max_fee:Ne(e.maxFee||0),version:"0x1"}).then(this.responseParser.parseInvokeFunctionResponse)}async deployAccountContract({classHash:t,constructorCalldata:e,addressSalt:r,signature:n},s){return this.fetchEndpoint("add_transaction",void 0,{type:"DEPLOY_ACCOUNT",contract_address_salt:r??Au(),constructor_calldata:Oa.compile(e??[]),class_hash:Ne(t),max_fee:Ne(s.maxFee||0),version:Ne(s.version||0),nonce:Ne(s.nonce),signature:Cu(n)}).then(this.responseParser.parseDeployContractResponse)}async declareContract({senderAddress:t,contract:e,signature:r,compiledClassHash:n},s){return Ou(e)?this.fetchEndpoint("add_transaction",void 0,{type:"DECLARE",sender_address:t,compiled_class_hash:n,contract_class:e,nonce:Ne(s.nonce),signature:Cu(r),max_fee:Ne(s.maxFee||0),version:Ne(Hi)}).then(this.responseParser.parseDeclareContractResponse):this.fetchEndpoint("add_transaction",void 0,{type:"DECLARE",contract_class:e,nonce:Ne(s.nonce),signature:Cu(r),sender_address:t,max_fee:Ne(s.maxFee||0),version:Ne($i)}).then(this.responseParser.parseDeclareContractResponse)}async getEstimateFee(t,e,r=this.blockIdentifier,n=!1){return this.getInvokeEstimateFee(t,e,r,n)}async getInvokeEstimateFee(t,e,r=this.blockIdentifier,n=!1){const s=this.buildTransaction({type:"INVOKE_FUNCTION",...t,...e},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},s).then(this.responseParser.parseFeeEstimateResponse)}async getDeclareEstimateFee(t,e,r=this.blockIdentifier,n=!1){const s=this.buildTransaction({type:"DECLARE",...t,...e},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},s).then(this.responseParser.parseFeeEstimateResponse)}async getDeployAccountEstimateFee(t,e,r=this.blockIdentifier,n=!1){const s=this.buildTransaction({type:"DEPLOY_ACCOUNT",...t,...e},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},s).then(this.responseParser.parseFeeEstimateResponse)}async getEstimateFeeBulk(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!1}){const n=t.map((t=>this.buildTransaction(t,"fee")));return this.fetchEndpoint("estimate_fee_bulk",{blockIdentifier:e,skipValidate:r},n).then(this.responseParser.parseFeeEstimateBulkResponse)}async getCode(t,e=this.blockIdentifier){return this.fetchEndpoint("get_code",{contractAddress:t,blockIdentifier:e})}async waitForTransaction(t,e){let r,n=!1,s=0;const a=e?.retryInterval??5e3,i=e?.errorStates??["REJECTED","NOT_RECEIVED","REVERTED"],o=e?.successStates??["SUCCEEDED","ACCEPTED_ON_L1","ACCEPTED_ON_L2"];for(;!n;)if(await Pu(a),r=await this.getTransactionStatus(t),"NOT_RECEIVED"===r.finality_status&&s<3)s+=1;else if(o.includes(r.finality_status)||o.includes(r.execution_status))n=!0;else if(i.includes(r.finality_status)||i.includes(r.execution_status)){let t;t=r.tx_failure_reason?`${r.tx_status}: ${r.tx_failure_reason.code}\n${r.tx_failure_reason.error_message}`:r.tx_revert_reason?`${r.tx_status}: ${r.tx_revert_reason}`:r.tx_status;const e=new Error(t);throw e.response=r,e}return await this.getTransactionReceipt(t)}async getTransactionStatus(t){const e=Ne(t);return this.fetchEndpoint("get_transaction_status",{transactionHash:e})}async getContractAddresses(){return this.fetchEndpoint("get_contract_addresses")}async getTransactionTrace(t){const e=Ne(t);return this.fetchEndpoint("get_transaction_trace",{transactionHash:e})}async estimateMessageFee({from_address:t,to_address:e,entry_point_selector:r,payload:n},s=this.blockIdentifier){const a={from_address:He(t),to_address:Ve(e),entry_point_selector:ms(r),payload:ze(n)};return this.fetchEndpoint("estimate_message_fee",{blockIdentifier:s},a)}async getSimulateTransaction(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!1,skipExecute:n=!1}){t.length>1&&console.warn("Sequencer simulate process only first element from invocations list"),n&&console.warn("Sequencer can't skip account __execute__");const s=this.buildTransaction(t[0]);return this.fetchEndpoint("simulate_transaction",{blockIdentifier:e,skipValidate:r??!1},s).then(this.responseParser.parseSimulateTransactionResponse)}async getStateUpdate(t=this.blockIdentifier){const e=new id(t).sequencerIdentifier;return this.fetchEndpoint("get_state_update",{...e}).then(this.responseParser.parseGetStateUpdateResponse)}async getBlockTraces(t=this.blockIdentifier){const e=new id(t).sequencerIdentifier;return this.fetchEndpoint("get_block_traces",{...e})}async getStarkName(t,e){return nd(this,t,e)}async getAddressFromStarkName(t,e){return sd(this,t,e)}buildTransaction(t,e){const r=ji(e),n={signature:Cu(t.signature),nonce:Ne(t.nonce)};if("INVOKE_FUNCTION"===t.type)return{type:t.type,sender_address:t.contractAddress,calldata:Oa.compile(t.calldata??[]),version:Ne(t.version||r.v1),...n};if("DECLARE"===t.type)return Ou(t.contract)?{type:t.type,contract_class:t.contract,compiled_class_hash:t.compiledClassHash,sender_address:t.senderAddress,version:Ne(t.version||r.v2),...n}:{type:t.type,contract_class:t.contract,sender_address:t.senderAddress,version:Ne(t.version||r.v1),...n};if("DEPLOY_ACCOUNT"===t.type)return{type:t.type,constructor_calldata:Oa.compile(t.constructorCalldata||[]),class_hash:Ne(t.classHash),contract_address_salt:Ne(t.addressSalt||0),version:Ne(t.version||r.v1),...n};throw Error("Sequencer buildTransaction received unknown TransactionType")}},kd=class{constructor(t){this.provider=t instanceof kd?t.provider:t instanceof dd||t instanceof vd?t:t&&"rpc"in t?new dd(t.rpc):t&&"sequencer"in t?new vd(t.sequencer):new dd}async getChainId(){return this.provider.getChainId()}async getBlock(t){return this.provider.getBlock(t)}async getClassAt(t,e){return this.provider.getClassAt(t,e)}async getClassHashAt(t,e){return this.provider.getClassHashAt(t,e)}getClassByHash(t){return this.provider.getClassByHash(t)}async getEstimateFee(t,e,r){return this.provider.getEstimateFee(t,e,r)}async getInvokeEstimateFee(t,e,r,n){return this.provider.getInvokeEstimateFee(t,e,r,n)}async getEstimateFeeBulk(t,e){return this.provider.getEstimateFeeBulk(t,e)}async getNonceForAddress(t,e){return this.provider.getNonceForAddress(t,e)}async getStorageAt(t,e,r){return this.provider.getStorageAt(t,e,r)}async getTransaction(t){return this.provider.getTransaction(t)}async getTransactionReceipt(t){return this.provider.getTransactionReceipt(t)}async callContract(t,e){return this.provider.callContract(t,e)}async invokeFunction(t,e){return this.provider.invokeFunction(t,e)}async deployAccountContract(t,e){return this.provider.deployAccountContract(t,e)}async declareContract(t,e){return this.provider.declareContract(t,e)}async getDeclareEstimateFee(t,e,r,n){return this.provider.getDeclareEstimateFee(t,e,r,n)}getDeployAccountEstimateFee(t,e,r,n){return this.provider.getDeployAccountEstimateFee(t,e,r,n)}async getCode(t,e){return this.provider.getCode(t,e)}async waitForTransaction(t,e){return this.provider.waitForTransaction(t,e)}async getSimulateTransaction(t,e){return this.provider.getSimulateTransaction(t,e)}async getStateUpdate(t){return this.provider.getStateUpdate(t)}async getStarkName(t,e){return nd(this,t,e)}async getAddressFromStarkName(t,e){return sd(this,t,e)}async getContractVersion(t,e,r){return this.provider.getContractVersion(t,e,r)}},Ad=class{},xd={};p(xd,{fromCallsToExecuteCalldata:()=>Cd,fromCallsToExecuteCalldataWithNonce:()=>Id,fromCallsToExecuteCalldata_cairo1:()=>Od,getExecuteCalldata:()=>Nd,transformCallsToMulticallArrays:()=>Sd,transformCallsToMulticallArrays_cairo1:()=>Td});var Sd=t=>{const e=[],r=[];return t.forEach((t=>{const n=Oa.compile(t.calldata||[]);e.push({to:Te(t.contractAddress).toString(10),selector:Te(ys(t.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)})),{callArray:e,calldata:Oa.compile({calldata:r})}},Cd=t=>{const{callArray:e,calldata:r}=Sd(t);return[...Oa.compile({callArray:e}),...r]},Id=(t,e)=>[...Cd(t),Te(e).toString()],Td=t=>t.map((t=>({to:Te(t.contractAddress).toString(10),selector:Te(ys(t.entrypoint)).toString(10),calldata:Oa.compile(t.calldata||[])}))),Od=t=>{const e=t.map((t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:Oa.compile(t.calldata)})));return Oa.compile({orderCalls:e})},Nd=(t,e="0")=>"1"===e?Od(t):Cd(t),Rd={};p(Rd,{encodeData:()=>jd,encodeType:()=>Hd,encodeValue:()=>zd,getDependencies:()=>$d,getMessageHash:()=>qd,getStructHash:()=>Md,getTypeHash:()=>Vd,isMerkleTreeType:()=>Ld,prepareSelector:()=>Ud});var Bd={};p(Bd,{MerkleTree:()=>Dd,proofMerklePath:()=>Fd});var Dd=class{constructor(t){this.branches=[],this.leaves=t,this.root=this.build(t)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const e=[];for(let r=0;r<t.length;r+=2)r+1===t.length?e.push(Dd.hash(t[r],"0x0")):e.push(Dd.hash(t[r],t[r+1]));return this.build(e)}static hash(t,e){const[r,n]=[Te(t),Te(e)].sort(((t,e)=>t>=e?1:-1));return Ze.pedersen(r,n)}getProof(t,e=this.leaves,r=[]){const n=e.indexOf(t);if(-1===n)throw new Error("leaf not found");if(1===e.length)return r;const s=n%2==0,a=(s?e[n+1]:e[n-1])??"0x0",i=[...r,a],o=this.leaves.length===e.length?-1:this.branches.findIndex((t=>t.length===e.length)),c=this.branches[o+1]??[this.root];return this.getProof(Dd.hash(s?t:a,s?a:t),c,i)}};function Fd(t,e,r){if(0===r.length)return t===e;const[n,...s]=r;return Fd(t,Dd.hash(e,n),s)}function Pd(t){try{return Ne(t)}catch(e){if("string"==typeof t)return Ne(Ss(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function Ud(t){return Ie(t)?t:ys(t)}function Ld(t){return"merkletree"===t.type}var $d=(t,e,r=[])=>("*"===e[e.length-1]&&(e=e.slice(0,-1)),r.includes(e)?r:t[e]?[e,...t[e].reduce(((e,r)=>[...e,...$d(t,r.type,e).filter((t=>!e.includes(t)))]),[])]:r);var Hd=(t,e)=>{const[r,...n]=$d(t,e);return(r?[r,...n.sort()]:[]).map((e=>`${e}(${t[e].map((t=>`${t.name}:${t.type}`))})`)).join("")},Vd=(t,e)=>ys(Hd(t,e)),zd=(t,e,r,n={})=>{if(t[e])return[e,Md(t,e,r)];if(Object.keys(t).map((t=>`${t}*`)).includes(e)){const n=r.map((r=>Md(t,e.slice(0,-1),r)));return[e,Mi(n)]}if("merkletree"===e){const e=function(t,e){if(e.parent&&e.key){const r=t[e.parent].find((t=>t.name===e.key));if(!Ld(r))throw new Error(`${e.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return r.contains}return"raw"}(t,n),s=r.map((r=>zd(t,e,r)[1])),{root:a}=new Dd(s);return["felt",a]}return"felt*"===e?["felt*",Mi(r)]:"selector"===e?["felt",Ud(r)]:[e,Pd(r)]},jd=(t,e,r)=>{const[n,s]=t[e].reduce((([n,s],a)=>{if(void 0===r[a.name]||null===r[a.name])throw new Error(`Cannot encode data: missing data for '${a.name}'`);const i=r[a.name],[o,c]=zd(t,a.type,i,{parent:e,key:a.name});return[[...n,o],[...s,c]]}),[["felt"],[Vd(t,e)]]);return[n,s]},Md=(t,e,r)=>Mi(jd(t,e,r)[1]),qd=(t,e)=>{if(!(t=>{const e=t;return Boolean(e.types&&e.primaryType&&e.message)})(t))throw new Error("Typed data does not match JSON schema");return Mi([Ss("StarkNet Message"),Md(t.types,"StarkNetDomain",t.domain),e,Md(t.types,t.primaryType,t.message)])},Zd=class{constructor(t=Ze.utils.randomPrivateKey()){this.pk=t instanceof Uint8Array?rt(t):Ne(t)}async getPubKey(){return Ze.getStarkKey(this.pk)}async signMessage(t,e){const r=qd(t,e);return Ze.sign(r,this.pk)}async signTransaction(t,e,r){if(r&&r.length!==t.length)throw new Error("ABI must be provided for each transaction or no transaction");const n=Nd(t,e.cairoVersion),s=Yi(e.walletAddress,e.version,n,e.maxFee,e.chainId,e.nonce);return Ze.sign(s,this.pk)}async signDeployAccountTransaction({classHash:t,contractAddress:e,constructorCalldata:r,addressSalt:n,maxFee:s,version:a,chainId:i,nonce:o}){const c=Gi(e,t,Oa.compile(r),n,a,s,i,o);return Ze.sign(c,this.pk)}async signDeclareTransaction({classHash:t,senderAddress:e,chainId:r,maxFee:n,version:s,nonce:a,compiledClassHash:i}){const o=Ki(t,e,s,n,r,a,i);return Ze.sign(o,this.pk)}};function Kd(t){if(!t.events)throw new Error("UDC emitted event is empty");const e=t.events.find((t=>Fe(t.from_address)===Fe(xt.ADDRESS)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}var Gd=class extends kd{constructor(t,e,r,n){super(t),this.deploySelf=this.deployAccount,this.address=e.toLowerCase(),this.signer="string"==typeof r||r instanceof Uint8Array?new Zd(r):r,n&&(this.cairoVersion=n.toString())}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return Te(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateFee(t,e){return this.estimateInvokeFee(t,e)}async estimateInvokeFee(t,{nonce:e,blockIdentifier:r,skipValidate:n}={}){const s=Array.isArray(t)?t:[t],a=Te(e??await this.getNonce()),i=Te(Vi),o=await this.getChainId(),c={walletAddress:this.address,nonce:a,maxFee:mt,version:i,chainId:o,cairoVersion:await this.getCairoVersion()},l=await this.buildInvocation(s,c),u=await super.getInvokeEstimateFee({...l},{version:i,nonce:a},r,n),d=Tu(u.overall_fee);return{...u,suggestedMaxFee:d}}async estimateDeclareFee({contract:t,classHash:e,casm:r,compiledClassHash:n},{blockIdentifier:s,nonce:a,skipValidate:i}={}){const o=Te(a??await this.getNonce()),c=Ou(t)?zi:Vi,l=await this.getChainId(),u=await this.buildDeclarePayload({classHash:e,contract:t,casm:r,compiledClassHash:n},{nonce:o,chainId:l,version:c,walletAddress:this.address,maxFee:mt,cairoVersion:void 0}),d=await super.getDeclareEstimateFee(u,{version:c,nonce:o},s,i),h=Tu(d.overall_fee);return{...d,suggestedMaxFee:h}}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:r=[],contractAddress:n},{blockIdentifier:s,skipValidate:a}={}){const i=Te(Vi),o=mt,c=await this.getChainId(),l=await this.buildAccountDeployPayload({classHash:t,addressSalt:e,constructorCalldata:r,contractAddress:n},{nonce:o,chainId:c,version:i,walletAddress:this.address,maxFee:mt,cairoVersion:void 0}),u=await super.getDeployAccountEstimateFee({...l},{version:i,nonce:o},s,a),d=Tu(u.overall_fee);return{...u,suggestedMaxFee:d}}async estimateDeployFee(t,e){const r=this.buildUDCContractPayload(t);return this.estimateInvokeFee(r,e)}async estimateFeeBulk(t,{nonce:e,blockIdentifier:r,skipValidate:n}={}){const s=await this.accountInvocationsFactory(t,{versions:[Vi,zi],nonce:e,blockIdentifier:r}),a=await super.getEstimateFeeBulk(s,{blockIdentifier:r,skipValidate:n});return[].concat(a).map((t=>{const e=Tu(t.overall_fee);return{...t,suggestedMaxFee:e}}))}async buildInvocation(t,e){const r=Nd(t,await this.getCairoVersion()),n=await this.signer.signTransaction(t,e);return{contractAddress:this.address,calldata:r,signature:n}}async execute(t,e=void 0,r={}){const n=Array.isArray(t)?t:[t],s=Te(r.nonce??await this.getNonce()),a=r.maxFee??await this.getSuggestedMaxFee({type:"INVOKE_FUNCTION",payload:t},r),i=Te($i),o=await this.getChainId(),c={walletAddress:this.address,nonce:s,maxFee:a,version:i,chainId:o,cairoVersion:await this.getCairoVersion()},l=await this.signer.signTransaction(n,c,e),u=Nd(n,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:u,signature:l},{nonce:s,maxFee:a,version:i})}async declareIfNot(t,e={}){const r=Nu(t);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(t,e)}return{transaction_hash:"",class_hash:r.classHash}}async declare(t,e={}){const r=Nu(t),n={};n.nonce=Te(e.nonce??await this.getNonce()),n.maxFee=e.maxFee??await this.getSuggestedMaxFee({type:"DECLARE",payload:r},e),n.version=Ou(t.contract)?Hi:$i,n.chainId=await this.getChainId();const s=await this.buildDeclarePayload(r,{...n,walletAddress:this.address,cairoVersion:void 0});return this.declareContract(s,n)}async deploy(t,e){const r=[].concat(t).map((t=>{const{classHash:e,salt:r,unique:n=!0,constructorCalldata:s=[]}=t,a=Oa.compile(s),i=r??Au();return{call:{contractAddress:xt.ADDRESS,entrypoint:xt.ENTRYPOINT,calldata:[e,i,je(n),a.length,...a]},address:Wi(n?Ze.pedersen(this.address,i):i,e,a,n?xt.ADDRESS:0)}})),n=r.map((t=>t.call)),s=r.map((t=>t.address));return{...await this.execute(n,void 0,e),contract_address:s}}async deployContract(t,e){const r=await this.deploy(t,e);return Kd(await this.waitForTransaction(r.transaction_hash))}async declareAndDeploy(t,e){const{constructorCalldata:r,salt:n,unique:s}=t;let a=await this.declareIfNot(t,e);if(""!==a.transaction_hash){const t=await this.waitForTransaction(a.transaction_hash);a={...a,...t}}const i=await this.deployContract({classHash:a.class_hash,salt:n,unique:s,constructorCalldata:r},e);return{declare:{...a},deploy:i}}async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:r=0,contractAddress:n},s={}){const a=Te($i),i=mt,o=await this.getChainId(),c=Oa.compile(e),l=n??Wi(r,t,c,0),u=s.maxFee??await this.getSuggestedMaxFee({type:"DEPLOY_ACCOUNT",payload:{classHash:t,constructorCalldata:c,addressSalt:r,contractAddress:l}},s),d=await this.signer.signDeployAccountTransaction({classHash:t,constructorCalldata:c,contractAddress:l,addressSalt:r,chainId:o,maxFee:u,version:a,nonce:i});return this.deployAccountContract({classHash:t,addressSalt:r,constructorCalldata:e,signature:d},{nonce:i,maxFee:u,version:a})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return qd(t,this.address)}async verifyMessageHash(t,e){try{return await this.callContract({contractAddress:this.address,entrypoint:"isValidSignature",calldata:Oa.compile({hash:Te(t).toString(),signature:Su(e)})}),!0}catch{return!1}}async verifyMessage(t,e){const r=await this.hashMessage(t);return this.verifyMessageHash(r,e)}async getSuggestedMaxFee({type:t,payload:e},r){let n;switch(t){case"INVOKE_FUNCTION":n=await this.estimateInvokeFee(e,r);break;case"DECLARE":n=await this.estimateDeclareFee(e,r);break;case"DEPLOY_ACCOUNT":n=await this.estimateAccountDeployFee(e,r);break;case"DEPLOY":n=await this.estimateDeployFee(e,r);break;default:n={suggestedMaxFee:mt,overall_fee:mt}}return n.suggestedMaxFee}async buildDeclarePayload(t,{nonce:e,chainId:r,version:n,walletAddress:s,maxFee:a}){const{classHash:i,contract:o,compiledClassHash:c}=Nu(t),l=Lu(o);return{senderAddress:s,signature:await this.signer.signDeclareTransaction({classHash:i,compiledClassHash:c,senderAddress:s,chainId:r,maxFee:a,version:n,nonce:e}),contract:l,compiledClassHash:c}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:r=[],contractAddress:n},{nonce:s,chainId:a,version:i,maxFee:o}){const c=Oa.compile(r),l=n??Wi(e,t,c,0);return{classHash:t,addressSalt:e,constructorCalldata:c,signature:await this.signer.signDeployAccountTransaction({classHash:t,contractAddress:l,chainId:a,maxFee:o,version:i,nonce:s,addressSalt:e,constructorCalldata:c})}}buildUDCContractPayload(t){return[].concat(t).map((t=>{const{classHash:e,salt:r="0",unique:n=!0,constructorCalldata:s=[]}=t,a=Oa.compile(s);return{contractAddress:xt.ADDRESS,entrypoint:xt.ENTRYPOINT,calldata:[e,r,je(n),a.length,...a]}}))}async simulateTransaction(t,{nonce:e,blockIdentifier:r,skipValidate:n,skipExecute:s}={}){const a=await this.accountInvocationsFactory(t,{versions:[$i,Hi],nonce:e,blockIdentifier:r});return super.getSimulateTransaction(a,{blockIdentifier:r,skipValidate:n,skipExecute:s})}async accountInvocationsFactory(t,{versions:e,nonce:r,blockIdentifier:n}){const s=e[0],a=await this.getNonceSafe(r),i=await this.getChainId(),o="payload"in t[0]?t[0].payload:t[0],c="DEPLOY_ACCOUNT"===t[0].type?await this.getCairoVersion(o.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map((async(t,r)=>{const o="payload"in t?t.payload:t,l={walletAddress:this.address,nonce:Te(Number(a)+r),maxFee:mt,version:s,chainId:i,cairoVersion:c},u={type:t.type,version:s,nonce:Te(Number(a)+r),blockIdentifier:n};if("INVOKE_FUNCTION"===t.type){const t=await this.buildInvocation([].concat(o),l);return{...u,...t}}if("DECLARE"===t.type){l.version=Ou(o.contract)?Te(e[1]):Te(e[0]);const t=await this.buildDeclarePayload(o,l);return{...u,...t,version:l.version}}if("DEPLOY_ACCOUNT"===t.type){const t=await this.buildAccountDeployPayload(o,l);return{...u,...t}}if("DEPLOY"===t.type){const t=this.buildUDCContractPayload(o),e=await this.buildInvocation(t,l);return{...u,...e,type:"INVOKE_FUNCTION"}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${t}`)})))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}},Yd=class{},Wd=new kd({rpc:{default:!0}}),Xd=class extends Yd{},Jd={};function Qd(t){return t.filter((t=>"event"===t.type&&(t.size||"enum"!==t.kind))).reduce(((t,e)=>{const r=e.name.slice(e.name.lastIndexOf(":")+1),n={...e};return n.name=r,{...t,[st(Ze.keccak(J(r)).toString(16))]:n}}),{})}function th(t,e,r,n){return t.flat().reduce(((t,s)=>{const a=e[s.keys[0]];if(!a)return t;const i={};i[a.name]={},s.keys.shift();const o=s.keys[Symbol.iterator](),c=s.data[Symbol.iterator](),l=a.members?.filter((t=>"key"===t.kind))||a.keys,u=a.members?.filter((t=>"data"===t.kind))||a.data;return l.forEach((t=>{i[a.name][t.name]=Ea(o,t,r,n,i[a.name])})),u.forEach((t=>{i[a.name][t.name]=Ea(c,t,r,n,i[a.name])})),t.push(i),t}),[])}p(Jd,{getAbiEvents:()=>Qd,parseEvents:()=>th});var eh=t=>{const e=t[t.length-1];return"object"==typeof e&&["blockIdentifier","parseRequest","parseResponse","formatResponse","maxFee","nonce","signature","addressSalt"].some((t=>t in e))?{args:t,options:t.pop()}:{args:t}};function rh(t,e){return async function(...r){const n=eh(r);return t.call(e.name,n.args,{parseRequest:!0,parseResponse:!0,...n.options})}}function nh(t,e){return"view"===e.stateMutability||"view"===e.state_mutability?rh(t,e):function(t,e){return async function(...r){const n=eh(r);return t.invoke(e.name,n.args,{parseRequest:!0,...n.options})}}(t,e)}function sh(t,e){return function(...r){return t.estimate(e.name,r)}}function ah(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}var ih=class{constructor(t,e,r=Wd){this.address=e&&e.toLowerCase(),this.providerOrAccount=r,this.callData=new Oa(t),this.structs=Oa.getAbiStruct(t),this.events=Qd(t);const n=da(t);this.abi=n.getLegacyFormat();const s={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach((t=>{if("function"!==t.type)return;const e=t.name;var r,n;this[e]||Object.defineProperty(this,e,{...s,value:nh(this,t)}),this.functions[e]||Object.defineProperty(this.functions,e,{...s,value:nh(this,t)}),this.callStatic[e]||Object.defineProperty(this.callStatic,e,{...s,value:rh(this,t)}),this.populateTransaction[e]||Object.defineProperty(this.populateTransaction,e,{...s,value:(r=this,n=t,function(...t){return r.populate(n.name,t)})}),this.estimateFee[e]||Object.defineProperty(this.estimateFee,e,{...s,value:sh(this,t)})}))}attach(t){this.address=t}connect(t){this.providerOrAccount=t}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(t,e=[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:s,blockIdentifier:a}={}){Jt(null!==this.address,"contract is not connected to an address");const i=ah(e,(()=>r?(this.callData.validate("CALL",t,e),this.callData.compile(t,e)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e)));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:i,entrypoint:t},a).then((e=>n?s?this.callData.format(t,e.result,s):this.callData.parse(t,e.result):e.result))}invoke(t,e=[],{parseRequest:r=!0,maxFee:n,nonce:s,signature:a}={}){Jt(null!==this.address,"contract is not connected to an address");const i=ah(e,(()=>r?(this.callData.validate("INVOKE",t,e),this.callData.compile(t,e)):(console.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),e))),o={contractAddress:this.address,calldata:i,entrypoint:t};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(o,void 0,{maxFee:n,nonce:s});if(!s)throw new Error("Nonce is required when invoking a function without an account");return console.warn(`Invoking ${t} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...o,signature:a},{nonce:s})}async estimate(t,e=[]){Jt(null!==this.address,"contract is not connected to an address"),ah(e,(()=>!1))||this.callData.validate("INVOKE",t,e);const r=this.populate(t,e);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(r);throw Error("Contract must be connected to the account contract to estimate")}populate(t,e=[]){const r=ah(e,(()=>this.callData.compile(t,e)));return{contractAddress:this.address,entrypoint:t,calldata:r}}parseEvents(t){return th(t.events?.filter((t=>Fe(t.from_address)===Fe(this.address)),[])||[],this.events,this.structs,Oa.getAbiEnum(this.abi))}isCairo1(){return Is.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typed(t){return this}},oh=class{},ch=class{constructor(t){this.compiledContract=t.compiledContract,this.account=t.account,this.casm=t.casm,this.abi=t.abi??t.compiledContract.abi,this.classHash=t.classHash,this.compiledClassHash=t.compiledClassHash,this.CallData=new Oa(this.abi)}async deploy(...t){const{args:e,options:r={parseRequest:!0}}=eh(t),n=ah(e,(()=>r.parseRequest?(this.CallData.validate("DEPLOY","constructor",e),this.CallData.compile("constructor",e)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e))),{deploy:{contract_address:s,transaction_hash:a}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:n,salt:r.addressSalt});Jt(Boolean(s),"Deployment of the contract failed");const i=new ih(this.compiledContract.abi,s,this.account);return i.deployTransactionHash=a,i}connect(t){return this.account=t,this}attach(t){return new ih(this.abi,t,this.account)}};function lh(t){return st(nt(Ne(t)).padStart(64,"0"))}function uh(t){Pe(t,mt,wt,"Starknet Address");const e=lh(t);if(!e.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return e}function dh(t){const e=nt(uh(t)).toLowerCase().split(""),r=le(nt(ps(t)).padStart(64,"0"));for(let t=0;t<e.length;t+=2)r[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&r[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return st(e.join(""))}function hh(t){return dh(t)===t}var fh,ph=Qt;return fh=F,g(c({},"__esModule",{value:!0}),fh)})();
/*! Bundled license information:

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/poseidon.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=/sm/d40f054a45d911ba7842eb7ebb8fc0ee8b9a9bb4e98f4831125744ff4a09b141.map